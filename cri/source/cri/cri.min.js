!function(a){function b(){}a.cri={},b.extend=function(a){var b=function(a){function b(){}return b.prototype=a,new b}(this.prototype);return b.constructor=a,a.prototype=b,a.extend=this.extend,a},cri.Class=b,cri.getFormValue=function(a){var b={},c=":input:not(:button,[type=submit],[type=reset],[disabled])",d="select";return $(c,a).each(function(){var a=$(this).attr("data-role");a&&"timeInput"==a?this.name&&(b[this.name]=$(this).data("timeInput").getFormatValue()):this.name&&(b[this.name]=$(this).val())}),$(d,a).each(function(){var a=$(this).attr("data-role");a&&"selectBox"==a?this.name&&(b[this.name]=$(this).data("selectBox").value()):this.name&&(b[this.name]=$(this).val())}),b},cri.setFormValue=function(a,b){for(var c in b){var d=$("[name="+c+"]",a);if(d.length)switch(d.attr("data-role")){case"input":d.data("input").value(b[c]);break;case"timeInput":d.data("timeInput").value(b[c]);break;case"selectBox":d.data("selectBox").value(b[c]);break;default:d.val(b[c])}}},cri.isLeapYear=function(a){return 0==a%4&&(a%100!=0||a%400==0)},cri.formatDate=function(a,b){var c=b||"yyyy-MM-dd",d=a.getFullYear(),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds();return c=c.replace(/yyyy|YYYY/,d),c=c.replace(/yy|YY/,d%100>9?(d%100).toString():"0"+d%100),c=c.replace(/MM/,e>9?e.toString():"0"+e),c=c.replace(/M/g,e),c=c.replace(/dd|DD/,f>9?f.toString():"0"+f),c=c.replace(/d|D/g,f),c=c.replace(/hh|HH/,g>9?g.toString():"0"+g),c=c.replace(/h|H/g,g),c=c.replace(/mm/,h>9?h.toString():"0"+h),c=c.replace(/m/g,h),c=c.replace(/ss|SS/,i>9?i.toString():"0"+i),c=c.replace(/s|S/g,i)},cri.date2Array=function(a){return[a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()]},cri.date2Json=function(a){return{yyyy:a.getFullYear(),MM:a.getMonth(),dd:a.getDate(),HH:a.getHours(),mm:a.getMinutes(),ss:a.getSeconds(),ww:a.getDay()}},cri.string2Date=function(a){var b=a.split(" "),c=b[0],d=b[1],e=c.split(/[\/,-]/);if(d){var f=d.split(":");return new Date(e[0],--e[1],e[2],f[0],f[1],f[2])}return new Date(e[0],--e[1],e[2])},cri.parseJSON=function(a){return a?new Function("return "+a)():{}},cri.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},cri.isNum=function(a){return null!=a&&""!=a?!isNaN(a):!1},cri.isPhoneNo=function(a){return/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/.test(a)},!function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,Math.abs(b)===1/0&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),JSON||(a.JSON={parse:function(a){return cri.parseJSON(a)},stringify:function(a){return a.toSource()}})}(),!function(a){$.fn._getHeightPixelValue=function(a){var b=$(this),c=b[0].style.height,d=b[0].height,e=a||c||d;if(e){if(/\d*%/.test(e)){var f=b.parent();return f.is(":visible")&&"0px"!=f.css("height")?Math.floor(b.parent().height()*parseInt(e)/100):null}return parseInt(e)}return null},$.fn._getWidthPixelValue=function(a){var b=$(this),c=b[0].style.width,d=b[0].width,e=a||c||d;if(e){if(/\d*%/.test(e)){var f=b.parent();return f.is(":visible")&&"0px"!=f.css("width")?Math.floor(b.parent().width()*parseInt(e)/100):null}return parseInt(e)}return null},$.fn.formValue=function(a){return arguments.length>0?void cri.setFormValue($(this),a):cri.getFormValue($(this))},$.fn.formReset=function(a){var b=$(this),c=":input:not(:button,[type=submit],[type=reset],[disabled])",d="select";a=a||{},$(c,b).each(function(){var b=$(this).attr("data-role"),c=this.name?a[this.name]:"";c=c||"",b?"input"==b?$(this).data("input").value(c):"timeInput"==b&&(c=c||new Date,$(this).data("timeInput").value(c)):$(this).val(c)}),$(d,b).each(function(){var b=$(this).attr("data-role"),c=this.name?a[this.name]:"";c=c||"",b&&"selectBox"==b?""!=c?$(this).data("selectBox").value(c):$(this).data("selectBox").select(0):""!=c?$(this).val(c):this.selectedIndex=0})}}(jQuery)}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d=b.Class.extend(function(a,b){this.$element=c(a),this._initOptions(b),this._init(),this._eventListen()});d.prototype._initOptions=function(a){this.options=c.extend(!0,{},this.options,a)},d.prototype._init=function(){},d.prototype._eventListen=function(){},d.prototype._destroy=function(){var a=this.$element,b=a.parent();b.after(a).remove()},d.prototype._getHeightPixelValue=function(a,b){var c=a[0].style.height,d=a[0].height,e=b||c||d;if(!e)return null;var f=(""+e).split("%");if(f.length>1){var g=a.parent();if(!g.is(":visible")||!g.style.height)return null;e=Math.floor(a.parent().height()*f[0]/100),e=(""+e).split("px")[0]}return e?parseInt(e):void 0},b.Widgets=d}(window),!function(a){"use strict";function b(a){return a=(""+a).replace(/(<.*?>)|(<\/.*?>)/g,"")}function c(a,b){var c=b||function(){var b=[];return e("tr th,td",a).each(function(){var a="{"+e(this).data("options")+"}";b.push(e.extend({title:e(this).html()},d.parseJSON(a)))}),b}();return e.map(c,function(a){return a.title&&a.width&&(a._width=a.width),a}),c}var d=a.cri,e=a.jQuery,f=31,g=31,h=41,i=31,j=5,k={title:null,height:null,width:null,toolbar:null,url:null,param:{},checkBox:!1,rowNum:!0,columns:null,pagination:!0,page:1,pageSize:10,filter:!0,onChange:null,onSelected:null,onDblClick:null,onLoad:null,ajaxDone:null},l=d.Widgets.extend(function(a,b){this.options=k,this.$element=e(a),this.$grid=null,this.$gridhead=null,this.$gridbody=null,this.toolbar=null,this.pager=null,this.$title=null,this._rows=null,this._columns=[],this._selectedId=[],this._gridClassName=this._gridClassName||"datagrid",d.Widgets.apply(this,arguments)});e.extend(l.prototype,{_eventListen:function(){var b=this,c=this.options,d=0,f=null;this.$gridbody.on("scroll",function(){e(".grid-head-wrap",b.$gridhead).scrollLeft(e(this).scrollLeft())}).on("click","tr",function(c){null!=f&&clearTimeout(f),f=a.setTimeout(function(){e("input[type=checkbox]",b.$gridhead).prop("checked",!1),b._setSelected(c),b.options.onChange&&b.options.onChange.call(b)},300)}).on("dblclick","tr",function(a){clearTimeout(f),b._onDblClickRow(a)}),e(document).on("mouseup",function(a){b.$gridhead.css("cursor",""),e(document).off("mousemove")}),this.$gridhead.on("mousedown",".drag-line",function(a){b.$gridhead.css("cursor","e-resize");var f=0;c.rowNum&&f++,c.checkBox&&f++,f+=e(this).data("drag");var g=e("col:eq("+f+")",b.$gridhead);d=a.pageX,e(document).on("mousemove",function(a){var c=a.pageX-d,h=+g.width()+c,i=e("table",b.$gridhead).width();d=a.pageX,h>=j&&(e("table",b.$gridbody).width(i+c),e("table",b.$gridhead).width(i+c),e("col:eq("+f+")",b.$gridhead).width(h),e("col:eq("+f+")",b.$gridbody).width(h))})}).on("click","input[type=checkbox]",function(a){var d=e(a.target).prop("checked");d?(b._selectedId=[],e("tr",b.$gridbody).each(function(){var a=e(this);b._selectedId.push(a.data("rowid")),a.addClass("selected"),e("input[type=checkbox]",a).prop("checked",d)})):(b._selectedId=[],e("tr",b.$gridbody).removeClass("selected")),e("input[type=checkbox]",b.$gridbody).each(function(){e(this).prop("checked",d)}),c.onChange&&c.onChange.call(b)})},_init:function(){this._columns=c(this.$element,this.options.columns),this._createGrid(),this._createPage(),this._getData(),this.options.onLoad&&"function"==typeof this.options.onLoad&&this.options.onLoad.call(this),this._colsWidth()},_createGrid:function(){var a=this.$element._getHeightPixelValue(this.options.height),b=this.$element._getWidthPixelValue(this.options.width),c=e("<div></div>").addClass("grid").addClass(this._gridClassName);a&&(a-=2),b&&(b-=2),c.attr("style",this.$element.attr("style")).css({width:b,height:a,display:"block"}),this.$element.wrap(c),this.$element.hide(),this.$grid=this.$element.parent(),this._createTitle(this.$grid),this._createToolbar(this.$grid),this._createGridView(this.$grid,a)},_createGridView:function(a,b){this.$gridview=e("<div></div>").addClass("grid-view"),this.$gridhead=e("<div></div>").addClass("grid-head"),a.append(this.$gridview.append(this.$gridhead).append(this.$gridbody)),b&&(b-=i,this.options.title&&(b-=f),this.options.toolbar&&(b-=g),this.options.pagination&&(b-=h)),this._createHead(this.$gridhead),this.$gridbody=this._createBody(b),this.$grid.append(this.$gridbody)},_createTitle:function(a){this.options.title&&(this.$title=e('<div class="title"><span>'+this.options.title+"</span></div>"),a.append(this.$title))},_createHead:function(a){var b=e("<div></div>").addClass("grid-head-wrap"),c=e("<table></table>"),d=e("<tr></tr>"),f=this.options,g=this._columns;if(c.append(this._createColGroup(a.width())),f.checkBox){var h=e("<td></td>").addClass("line-checkbox").append('<span class="td-content"><input type="checkbox"/></span>');d.append(h)}if(f.rowNum){var i=e("<td></td>").addClass("line-number").append('<div class="td-content"></div>');d.append(i)}for(var j=0,k=g.length;k>j;j++){var l=this,m=e("<td></td>"),n=e("<div></div>").addClass("drag-line").data("drag",j),o=e("<div></div>").addClass("td-content grid-header-text"),p=g[j];for(var q in p){var r=p[q];if("title"==q){if(o.prop("title",r).append(r),f.filter){var s=e('<span data-for="'+p.field+'" class="fa fa-filter filter-icon"></span>');s.click(function(a){var b=e(a.target).data("for");l._toggle(l.$grid.find("ul[data-for="+b+"]"))}),o.append(s)}}else"style"==q&&m.css(r)}m.append(o),k-1>j&&m.append(n),d.append(m)}c.append(d),a.html(b.html(c))},_createBody:function(a){var b=e('<div class="grid-body loading"></div>'),c=e('<i class="fa fa-spinner fa-spin"></i>').addClass("loadingIcon");return a&&b.height(a),b.append(c),b},_refreshBody:function(a){var b=e("<table></table>"),c=this.options,d=0,f=1+c.pageSize*(c.page-1),g=this._columns;a=a||this._rows,this._selectedId=[],b.append(e("colgroup",this.$gridhead).clone());for(var h=0,i=a.length;i>h;h++){var j=a[h],k=e("<tr></tr>").data("rowid",d);if(c.checkBox){var l=e('<td class="line-checkbox"></td>');j.check?(k.append(l.append('<input type="checkbox" checked/>')),k.addClass("selected"),this._selectedId.push(d)):k.append(l.append('<input type="checkbox"/>'))}c.rowNum&&k.append(e("<td></td>").addClass("line-number").append(f));for(var m=0,n=g.length;n>m;m++){var o=e("<td></td>"),p=e("<div></div>").addClass("td-content"),q=g[m],r=null==j[q.field]?"":j[q.field],s=(""+r).replace(/(<([^a\/]).*?>)|(<\/[^a].*?>)/g,"");if(q.button){var t=q.button;p.append("<button></button>"),e("button",p).button(t)}else p.prop("title",s).append(s);k.append(o.append(p))}f++,d++,b.append(k)}this.$gridbody.removeClass("loading").html(b),e("tr:nth-child(odd)",b).css("background","#FFF");var u=this.$gridbody.prop("clientWidth");if(u){var v=this.$gridbody.width()-u;this.$gridhead.css("paddingRight",v)}},_createColGroup:function(a){var b=[],c=this.options,d=this._columns;c.checkBox&&b.push(e("<col/>").width(30)),c.rowNum&&b.push(e("<col/>").width(25));for(var f=0,g=d.length;g>f;f++){var h=e("<col/>");d[f]._width&&h.width(d[f]._width),b.push(h)}return e("<colgroup></colgroup>").append(b)},_createToolbar:function(a){this.options.toolbar&&(this.toolbar=new d.ToolBar(a,{buttons:this.options.toolbar}))},_initFilter:function(){var a=this._rows,b=this._columns,c={};this._filters=this._filters||{};for(var d in b){var e=b[d].field,f={};for(var g in a){var h=a[g],i=h[e];void 0==f[i]&&(f[i]=!0)}c[e]=f}this._createFilterLists(c)},_createFilterLists:function(a){var c=this;for(var d in a){var f=this.$grid.offset(),g=this.$gridhead.find("span[data-for="+d+"].filter-icon").offset(),h={left:g.left-f.left+10,top:g.top-f.top},i=c.$grid.find("ul[data-for="+d+"]");i.length?i.empty():i=e('<ul class="grid-filter" data-for="'+d+'"></ul>');var j=e('<input type="checkbox" name="all"/>').click(function(a){var b=e(a.target).closest("ul");e(a.target).prop("checked")?b.find("input[type=checkbox]").prop("checked",!0):b.find("input[type=checkbox]").prop("checked",!1)});i.append(e("<li></li>").append(j,"全部"));var k=a[d];for(var l in k){var m=b(l),n=e('<input type="checkbox" name="'+m+'"/>').data("value",l);i.append(e('<li class="filter-value"></li>').append(n,m))}var o=e('<li class="footer"><button class="cancel">过滤</button></li>');i.append(o),i.css(h),o.find("button").button({handler:function(a){return function(){var b=a.attr("data-for"),d=[];a.find("li.filter-value input[type=checkbox]").each(function(){e(this).prop("checked")&&d.push(e(this).data("value"))}),c._filters[b]=d,c._filter(),c._toggle(a)}}(i)}),this.$grid.append(i)}},_toggle:function(a){a.is(":hidden")?a.slideDown(200,function(){e(document).mouseup(function(b){var c=a;c.is(b.target)||0!==c.has(b.target).length||a.slideUp(200)})}):a.slideUp(200)},_filter:function(){var a=this._filters,b=this._rows;for(var c in a){var d=a[c];for(var e in d){var f=d[e],g=[];for(var h in b)b[h][c]==f&&g.push(b[h]);b=g}}console.dir(b),this._refreshBody(b)},_createPage:function(){var a=this.options,b=this;this.options.pagination&&(this.pager=new d.Pager(this.$grid,{page:a.page,pageSize:a.pageSize,total:0,rowsLen:0,onPage:function(c,d){a.page=c,a.pageSize=d,b._getData()}}))},_getData:function(){var a=!0,b=this.options,c=this;return b.pagination&&(b.param.page=b.page,b.param.rows=b.pageSize),e.ajax({type:"post",url:this.options.url,success:function(a){if(b.ajaxDone){var d=b.ajaxDone.call(c,a);d&&(a=d)}c._rows=a.rows||[],b.total=a.total||0,c.pager&&c.pager.update(b.page,b.pageSize,b.total,c._rows.length),e("input[type=checkbox]",c.$gridhead).prop("checked",!1),c._refreshBody(),b.filter&&c._initFilter()},error:function(){c._rows=[],b.total=0,c.pager&&c.pager.update(b.page,b.pageSize,b.total,c._rows.length),c._refreshBody()},data:b.param,dataType:"JSON",async:!1}),a},_setSelected:function(a){var b=e(a.target).closest("tr"),c=b.data("rowid");if(this.options.checkBox)if(b.hasClass("selected")){var d=e.inArray(c,this._selectedId);d>=0&&this._selectedId.splice(d,1),b.removeClass("selected"),e("input[type=checkbox]",b).prop("checked",!1)}else this._selectedId=this._selectedId||[],b.addClass("selected"),this._selectedId.push(c),this.options.checkBox&&e("input[type=checkbox]",b).prop("checked",!0);else b.hasClass("selected")?(b.removeClass("selected"),this._selectedId=[]):(e("tr.selected",this.$gridbody).removeClass("selected"),b.addClass("selected"),this._selectedId=[c]);this._selectedId&&this._selectedId.length&&this.options.onSelected&&this.options.onSelected.call(this)},_colsWidth:function(){var a=this;e("tr:eq(0) td",this.$gridhead).each(function(b){e("col:eq("+b+")",a.$gridbody).width(e(this).width()+8),e("col:eq("+b+")",a.$gridhead).width(e(this).width()+8)})},_getRowDataById:function(a){return this._rows[parseInt(a)]},_onDblClickRow:function(a){var b=this,c=this.options,d=e(a.target).closest("tr"),f=d.data("rowid");this._selectedId=[f],e("tr.selected",this.$gridbody).removeClass("selected"),d.addClass("selected"),this.options.checkBox&&(e("input[type=checkbox]",this.$gridbody).prop("checked",!1),e("input[type=checkbox]",d).prop("checked",!0)),c.onDblClick&&c.onDblClick.call(b,b._getRowDataById(f))},reload:function(a){a&&(this.options.param=a),this.options.page=1,this._selectedId=[],this._getData()},loadData:function(a){a.push&&(this._rows=a,this._refreshBody())},getSelected:function(){for(var a=[],b=this._selectedId,c=0;c<b.length;c++)a.push(this._getRowDataById(b[c]));return a}}),d.Grid=l}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={text:"",iconCls:null,handler:null,enable:!0},e="button",f=b.Widgets.extend(function(a,c){this.options=d,this.$inputGroup=null,this.$button=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","button")});c.extend(f.prototype,{_eventListen:function(){var a=this;this.$button.on("click",function(){a.options.enable&&a.options.handler&&a.options.handler.call()})},_init:function(){this._create()},_create:function(){var a=this.options,b=a.iconCls||"",c=this.$element.hide(),d=a.text||c.text()||c.val()||"",f='<span class="icon"><i class="'+b+'"></i></span>',g='<span class="text">'+d+"</span>";c.wrap('<div class="'+e+'"></div>'),this.$button=c.parent(),this.$button.append(f,g),a.enable||this.disable()},text:function(a){this.$button.find("text").text(a)},iconCls:function(a){this.$button.find(".icon i").attr("class",a)},enable:function(){this.$button.removeClass("disabled"),this.options.enable=!0},disable:function(){this.$button.addClass("disabled"),this.options.enable=!1}}),b.Button=f,c.fn.button=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("button"),g="object"==typeof a&&a;null!=e&&e._destroy(),d.data("button",b=new f(this,g))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="content-loader",e={content:null,isIframe:!1,onReady:null},f=b.Widgets.extend(function(a,c){this.options=e,b.Widgets.apply(this,arguments),this.$content.attr("data-role","content-loader")});c.extend(f.prototype,{_init:function(){this._createBody()},_createBody:function(){this.$content=c('<div class="'+d+'"></div>'),this.$element.append(this.$content),this._load()},_load:function(){var a=!0,b=this;if(this.options.content instanceof jQuery?a=!1:/^<\w+>.*/g.test(this.options.content)&&(a=!1),a)if(this.options.isIframe){var c=document.createElement("iframe"),d=+new Date;c.src=this.options.content,c.id="id_"+d,c.name="name_"+d,c.attachEvent?c.attachEvent("onload",function(){b.options.callback&&b.options.callback.call()}):c.onload=function(){b.options.onReady&&b.options.onReady.call()},this.$content.append(c),this.$content.css("overflow","hidden")}else this.$content.load(this.options.content,function(){b.options.onReady&&b.options.onReady.call()});else this.$content.append(this.options.content),this.options.onReady&&this.options.onReady.call()},_destroy:function(){this.$content.remove()},getContent:function(){return this.$content},show:function(){this.$content.show()},hide:function(){this.$content.hide()},reload:function(a,b){a&&(this.options.content=a),b&&(this.options.onReady=b),this._destroy(),this._createBody()}}),b.ContentLoader=f}(window),!function(a){var b=a.jQuery,c=a.cri,d=c.DataGrid=c.Grid.extend(function(a,b){c.Grid.apply(this,arguments),this.$element.attr("data-role","datagrid")});b.fn.datagrid=function(a){var c=null;return this.each(function(){var e=b(this),f=e.data("datagrid");options="object"==typeof a&&a,null!=f&&f._destroy(),e.data("datagrid",c=new d(this,options))}),c}}(window),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.dataOptions=a.extend({},a.fn.fileUpload.defaults,c),this.title="",this.$element.attr("title")&&(this.title=this.$element.attr("title")),this.dataOptions.title&&(this.title=this.dataOptions.title),this.id=this.$element.attr("id"),this.name=this.$element.attr("name"),this.init(),this.$element.attr("data-role","fileupload")};b.prototype.init=function(){var b=this;this.fileUploadObj=this.$element,this.fileUploadObj.wrap(a('<div class="eb_fileUploadGroup"></div>')),this.parent=this.fileUploadObj.parent(),this.parent.data("fileUpload",b),this.fileUploadObj.after(a('<input class="eb_fileUploadInput" name="'+b.name+'" id="eb_fileUploadInput_'+b.id+'" />')),this.inputObj=this.parent.children(".eb_fileUploadInput"),this.inputObj.data("fileUpload",b),this.inputObj.before(a('<span class="eb_title">'+b.title+"</span>")),this.titleObj=this.parent.children(".eb_title"),this.inputObj.after(a('<div class="eb_button">浏览</div>')),this.buttonObj=this.parent.children(".eb_button"),this.fileUploadObj.change(function(){var a=b.fileUploadObj.val();b.inputObj.val(a),b.parent.attr("value",a)}),this.buttonObj.click(function(){b.fileUploadObj.trigger("click"),b.fileUploadObj.get(0).focus()}).mousedown(function(){setTimeout(function(){b.inputObj.addClass("focus"),b.buttonObj.addClass("focus")},1)}),this.setWidth(),this.setHeight(),this.setStyle()},b.prototype.setValue=function(a){this.inputObj.val(a),this.fileUploadObj.val(a),this.fileUploadObjClone&&his.fileUploadObjClone.val(a),this.parent.attr("value",a)},b.prototype.getValue=function(){var a=this.fileUploadObj.val();return this.fileUploadObjClone&&(a=this.fileUploadObjClone.val()),a},b.prototype.clearValue=function(){this.setValue("")},b.prototype.initInForm=function(b){var c=this;return b.append(c.fileUploadObjClone=c.fileUploadObj.clone().css("display","none").addClass("clone")),this.fileUploadObj.click(function(){return c.fileUploadObjClone.trigger("click"),!1}),this.fileUploadObjClone.change(function(){var b=a(this).val();c.setValue(b)}),c.fileUploadObjClone},b.prototype.setWidth=function(b){var c=this,d=a.fn.fileUpload.defaults.width;if(this.dataOptions.width&&(d=this.dataOptions.width),b&&(d=b),"string"==typeof d&&(d=d.split("px")[0]),this.parent.width(d),this.inputObj.width(c.parent.width()-140),this.fileUploadObj.width(c.parent.width()-75),this.dataOptions.titleWidth||0==this.dataOptions.titleWidth){var d=this.dataOptions.titleWidth;this.titleObj.width(d),this.inputObj.width(c.parent.width()-d-67),this.fileUploadObj.width(c.parent.width()-d-2)}},b.prototype.setHeight=function(b){var c=a.fn.fileUpload.defaults.height;this.dataOptions.height&&(c=this.dataOptions.height),b&&(c=b),"string"==typeof c&&(c=c.dplit("px")[0]),this.parent.height(c),this.inputObj.height(c-2),this.inputObj.css("line-height",c-2+"px"),this.fileUploadObj.height(c),this.titleObj.height(c),this.titleObj.css("line-height",c+2+"px"),this.buttonObj.height(c),this.buttonObj.css("line-height",c+"px")},b.prototype.setStyle=function(){var b=this;this.buttonObj.mouseover(function(){a(this).addClass("mouseover")}).mouseout(function(){a(this).removeClass("mouseover")}).mousedown(function(){a(this).addClass("mousedown")}).mouseup(function(){a(this).removeClass("mousedown")}),this.fileUploadObj.focus(function(){b.inputObj.addClass("focus"),b.buttonObj.addClass("focus")}).blur(function(){b.inputObj.removeClass("focus"),b.buttonObj.removeClass("focus")})},a.fn.fileUpload=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("fileUpload"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("fileUpload",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.fileUpload.defaults={width:250,height:20},a(window).on("load",function(){a(".eb_fileUpload").not(".clone").each(function(){var b=a(this),c=b.data("options");c?b.fileUpload(new Function("return {"+c+"}")()):b.fileUpload(a.fn.fileUpload.defaults)})})}(window.jQuery),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={label:null,value:null,button:null,readonly:!1,onFocus:null,onBlur:null,enable:!0,required:!1},e="input-group",f=23,g="with-btn",h=b.Widgets.extend(function(a,c){this.options=d,this.$inputGroup=null,this.button=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","input")});c.extend(h.prototype,{_eventListen:function(){},_init:function(){var a=this.options,b=this.$element.val();null==a.value&&null!=b&&(a.value=b),this._createInputGroup(),null!=a.value&&this._setValue(a.value)},_createInputGroup:function(){var a=this.$element;a.wrap('<div class="'+e+'"></div>'),this.$inputGroup=a.parent(),this._wrapInput(),this.$input.before(this._label()),this.options.enable||this.disable()},_wrapInput:function(){var a=this,b=a.options,d=this.$element;if(b.readonly?d=this._readonlyInput(d):d.on("focus",function(){a.options.onFocus&&a.options.onFocus.call(a)}).blur(function(){a.options.onBlur&&a.options.onBlur.call(a)}),b.button){var e=c("<button></button>");d.after(e),this._button(e),d.addClass(g)}this.$input=d},_readonlyInput:function(a){var b=this,d=c('<span class="readonly" role="readonly"></span>');return d.on("click",function(){b.options.onFocus&&b.options.onFocus.call(b)}).blur(function(){b.options.onBlur&&b.options.onBlur.call(b)}),this.$element.attr("readonly",!0).hide().after(d),d},_button:function(a){this.button=a.button(this.options.button)},_label:function(){var a=this.options.label||this.$element.data("label")||this.$element.attr("title")||this.$element.attr("name")||"",b=c("<label></label>").text(a);return this.options.required&&b.addClass("required"),b},_destroy:function(){var a=this.$element;this.$inputGroup.replaceWith(a)},_setValue:function(a){if(null!=a)if(this.$input.is("input"))this.$input.val(a),this.$input.change();else{if(this.$element.is("select"))if(this.$element.val(a),this.$element.attr("multiple")){var b=[];this.$element.find("option:selected").each(function(){b.push(c(this).text())}),this.$input.text(b.join(","))}else this.$input.text(this.$element.find("option:selected").text());else this.$element.val(a),this.$input.text(a);this.$element.change()}},_getValue:function(){return this.$element.val()},_showValidateMsg:function(a){this.$input.addClass("failure");var b=this.$input.offset();this.$errorMsg?this.$errorMsg.find("span").text(a):(this.$errorMsg=c('<div class="input-warm"><i class="fa fa-exclamation"></i><span>'+a+"</span></div>"),this.$input.after(this.$errorMsg)),b.top<=f?this.$errorMsg.addClass("bottom-input"):this.$errorMsg.removeClass("bottom-input"),this.$errorMsg.show(),c("html,body").is(":animated")||c("html,body").animate({scrollTop:this.$input.offset().top},300)},_hideValidateMsg:function(){this.$input.removeClass("failure"),this.$errorMsg&&this.$errorMsg.hide()},getButton:function(){return this.button},disable:function(){var a=c('<div class="input-layout"></div>');0==this.$inputGroup.has(".input-layout").length&&this.$inputGroup.append(a)},enable:function(){this.$inputGroup.children(".input-layout").remove()},value:function(a){return arguments.length>0?void this._setValue(a):this._getValue()}}),b.Input=h,c.fn.input=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("input"),f="object"==typeof a&&a,g=d.attr("role");return"timeInput"==g?e:(null!=e&&e._destroy(),void d.data("input",b=new h(this,f)))}),b}}(window),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.marquee.defaults,c),this.$element=a(b),this.scrollInterval=null,this.contentInterval=null,this.$one=null,this.$two=null,this.ita=0,this.init()};b.prototype={eventListen:function(){var a=this;this.$element.on("mouseenter",function(){clearInterval(a.scrollInterval)}).on("mouseleave",function(){a.start()})},init:function(){var a=this;this.ita=0,this.options.content.length>0&&(this.createEle(),this.contentInterval=window.setInterval(function(){a.start()},3e3),this.eventListen())},createEle:function(){this.$one||this.$element.append('<div class="contentOne"></div>'),this.$two||this.$element.append('<div class="contentTwo"></div>'),this.$one=a(".contentOne",this.$element),this.$two=a(".contentTwo",this.$element),this.options.content&&(this.$one.html("<span>"+this.options.content[0].text+"</span>"),this.$two.html("<span>"+this.options.content[0].text+"</span>"))},start:function(){this.ita++,this.ita>=this.options.content.length&&(this.ita=0),this.$two.html("<span>"+this.options.content[this.ita].text+"</span>"),this.$element.scrollTop(0),clearInterval(this.scrollInterval);var a=this;this.scrollInterval=window.setInterval(function(){a.scroll()},20)},stop:function(){clearInterval(this.contentInterval)},scroll:function(){this.$element.scrollTop(this.$element.scrollTop()+1),this.$element.scrollTop%20==20&&clearInterval(this.scrollInterval)},refreshContent:function(a){this.options.content=a,this.init()}},a.fn.marquee=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("marquee"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("marquee",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.marquee.defaults={content:[],delayTime:3e3,height:20},a(window).on("load",function(){a("[class='marquee']").each(function(){var b=a(this),c=b.data("options");c&&b.marquee(new Function("return {"+c+"}")())})})}(window.jQuery),!function(a){var b=a.cri,c=a.jQuery,d=function(){};d.prototype={_notiBody:function(b,d){var e=this,f={success:"fa-exclamation",error:"fa-exclamation",warming:"fa-exclamation"};this.$notification&&this.$notification.length&&this._hide(this.$notification);var g=this.$notification=c('<div class="notification '+b+'"></div>'),h=c('<i class="icon fa '+f[b]+'"></i>'),i=c('<span class="message">'+d+"</span>"),j=c('<i class="btn fa fa-close"></i>').on("click",function(){e._hide(g)});g.append(h,i,j),c("body").append(g),e._show(),a.setTimeout(function(){e._hide(g)},5e3)},_hide:function(a){a.animate({height:"hide"},function(){a.remove()})},_show:function(){this.$notification.animate({height:"show"})},error:function(a){this._notiBody("error",a)},warming:function(a){this._notiBody("warming",a)},success:function(a){this._notiBody("success",a)}},b.notification=new d}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="with-btn",e={label:null,value:0,readonly:!1,onFocus:null,onBlur:null,enable:!0,required:!1,max:null,min:null},f=b.Input.extend(function(a,c){this.options=e,this.$inputGroup=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","numberInput")});c.extend(f.prototype,{_eventListen:function(){},_wrapInput:function(){var a=this,b=a.options,c=a.$element;b.readonly?c=this._readonlyInput(c):c.on("focus",function(){a.options.onFocus&&a.options.onFocus.call(a)}).blur(function(){if(a.options.onBlur&&a.options.onBlur.call(a),null!=a.options.min){var b=a.$element.val();(""==b||b<a.options.min)&&a.value(a.options.min)}if(null!=a.options.max){var b=a.$element.val();(""==b||b>a.options.max)&&a.value(a.options.max)}}).on("change",function(){a.options.onChange&&a.options.onChange.call(a)}).on("keydown",function(a){var b=a.keyCode||a.which||a.charCode;return b>=48&&57>=b||8==b?!0:!1}),this.$input=c,c.addClass(d),this._appendBtn()},_appendBtn:function(){var a=this,d=c('<i class="fa fa-sort-up plus-button"></i>'),e=c('<i class="fa fa-sort-down minus-button"></i>'),f=c('<span class="plus-minus-button"></span>').append(e,d);d.click(function(){var c=a.value();b.isNum(c)?a.value(+c+1):a.value(parseInt(c,10)+1)}),e.click(function(){var c=a.value();b.isNum(c)?a.value(+c-1):a.value(parseInt(c,10)-1)}),this.$input.after(f)},value:function(a){return arguments.length>0?(null!=this.options.max&&a>this.options.max&&(a=this.options.max),null!=this.options.min&&a<this.options.min&&(a=this.options.min),this._setValue(a),void 0):this._getValue()}}),b.NumberInput=f,c.fn.numberInput=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("numberInput"),g="object"==typeof a&&a;d.attr("role");null!=e&&e._destroy(),d.data("numberInput",b=new f(this,g))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={page:1,pageSize:10,total:0,rowsLen:0,onPage:null,onUpdate:null},e="first-page",f="prev-page",g="next-page",h="last-page",i="pager-number",j="pager-nav",k="pager-info",l="state-disabled",m="state-selected",n=b.Widgets.extend(function(a,c){this.options=d,this.pager=null,b.Widgets.apply(this,arguments)});c.extend(n.prototype,{_eventListen:function(){var a=this;this.$pager.on("click","a:not('."+l+"')",function(b){var d=c(b.target).closest("a"),e=d.data("page");a._page(e)})},_init:function(){this._createPager(this.$element)},_createPager:function(a){var b=this.$pager=c("<div></div>").addClass("pager");b.append(this._createPagerBtn()).append(this._createPagerInfo()),a.append(b)},_createPagerBtn:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,k=parseInt(a.page)||1,l=Math.ceil(d/b),m=c("<div></div>").addClass(j),n=c("<a></a>").addClass(e).append('<span class="fa fa-angle-double-left"></span>'),o=c("<a></a>").addClass(f).append('<span class="fa fa-angle-left"></span>'),p=c("<a></a>").addClass(g).append('<span class="fa fa-angle-right"></span>'),q=c("<a></a>").addClass(h).append('<span class="fa fa-angle-double-right"></span>'),r=c("<ul></ul>").addClass(i);return this._fourBtn(n,o,p,q,k,l),this._numberPage(r,k,l),m.append(n).append(o).append(r).append(p).append(q),m},_updatePagerBtn:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,k=parseInt(a.page)||1,l=Math.ceil(d/b),m=c("."+j,this.$pager),n=c("."+e,m),o=c("."+f,m),p=c("."+g,m),q=c("."+h,m),r=c("."+i,m);this._fourBtn(n,o,p,q,k,l),r.empty(),this._numberPage(r,k,l);
},_fourBtn:function(a,b,c,d,e,f){var g=e+1,h=e-1;1>=e?(a.addClass(l),b.addClass(l)):(a.removeClass(l).data("page",1),b.removeClass(l).data("page",h)),e>=f?(c.addClass(l),d.addClass(l)):(c.removeClass(l).data("page",g),d.removeClass(l).data("page",f))},_numberPage:function(a,b,d){for(var e=b>2?b-2:1,f=e+5,g=e;f>g;g++)if(g>0&&d>=g){var h=c("<li></li>"),i=c("<a></a>").data("page",g).text(g);g!=b?i.addClass("pager-num"):i.addClass(m),a.append(h.append(i))}},_updatePagerInfo:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,e=parseInt(a.page)||1,f=(e-1)*b+1,g=(e-1)*b+a.rowsLen,h=this.$pager,i=c("."+k,h);i.text(f+" - "+g+" of "+d+" items")},_createPagerInfo:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,e=parseInt(a.page)||1,f=(e-1)*b+1,g=(e-1)*b+a.rowsLen;return c("<div></div>").addClass(k).text(f+" - "+g+" of "+d+" items")},_page:function(a){var b=this.options;b.page=a,this.options.onPage.call(this,b.page,b.pageSize)},update:function(a,b,c,d){var e=this.options;e.total=c,e.rowsLen=d,e.page=a,e.pageSize=b,this._updatePagerBtn(),this._updatePagerInfo(),e.onUpdate&&e.onUpdate(this)}}),b.Pager=n}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="selectBox-group",e="fa fa-caret-down",f="options",g="selected",h={label:"",data:null,change:null,value:null,enable:!0,multiple:!1},i=b.Widgets.extend(function(a,c){this.options=h,this.$selectBoxGroup=null,this.input=null,this.listView=null,this._value=null,this._text=null,b.Widgets.apply(this,arguments),this.$element.attr("data-role","selectBox")});c.extend(i.prototype,{_init:function(){this._create();var a=this.options.value||this.$element.val();null!=a&&this.value(a)},_create:function(){this.$element.hide(),this.options.multiple&&this.$element.attr("multiple","multiple"),this.$element.wrap('<span class="'+d+'"></span>'),this.$selectBoxGroup=this.$element.parent(),this._createInput(),this._createListView()},_createInput:function(){var a=this,c={iconCls:e,handler:function(){a.listView.toggle()}};this.input=new b.Input(this.$element,{label:a.label,readonly:!0,button:c,enable:this.options.enable,onFocus:function(){a.listView.toggle()}})},_createListView:function(){var a=this;this.listView=new j(this.$selectBoxGroup,{data:a._data(),multiple:a.options.multiple,onChange:function(b,c){a.options.multiple?(a._value=b,a._text=c,a.input.value(b)):(a._value=b[0],a._text=c,a.input.value(b[0])),a.options.change&&a.options.change.call(a)}})},_data:function(){var a=this.options.data;if(a){for(var b=[],d=0,e=a.length;e>d;d++)b.push('<option value="'+a[d].value+'">'+a[d].text+"</option>");this.$element.html(b.join(""))}else a=[],c("option",this.$element).each(function(){var b=c(this).text(),d=this.value;a.push({text:b,value:d})});return this.options.data=a,a},_setSelectOptions:function(a){var b=this.$element;if(b.is("select")){b.empty();for(var c=0,d=a.length;d>c;c++){var e=a[c];b.append('<option value="'+e.value+'">'+e.text+"</option>")}}},_getTextByValue:function(a){for(var b=this.options.data,c=0,d=b.length;d>c;c++)if(b[c].value===a)return b[c].text},_showValidateMsg:function(a){this.input&&this.input._showValidateMsg(a)},_hideValidateMsg:function(){this.input&&this.input._hideValidateMsg()},_destroy:function(){this.listView._destroy(),this.$selectBoxGroup.replaceWith(this.$element),this.input=null,this.listView=null},disable:function(){this.input.disable()},enable:function(){this.input.enable()},value:function(a){return arguments.length>0?(this._value=a,this.input.value(this._value),this.listView.select(this._value),this.options.change&&this.options.change.call(this),void 0):this._value},text:function(a){var b=this.options.data;if(!(arguments.length>0))return this._text;for(var c=0,d=b.length;d>c;c++)b[c].text===a&&this.value(b[c].value)},setOptions:function(a){this.options.data=a,this._data(),this._setSelectOptions(a),a.length&&this.value(a[0].value),this.listView._destroy(),this._createListView()},select:function(a){a=parseInt(a)||0,a>=0&&a<this.options.data.length&&this.value(this.options.data[a].value)}});var j=function(a,b){this.options=c.extend({data:[],onChange:null,multiple:!1},b),this.value=b.value||null,this.text=null,this.$options=null,this.$parent=a,this._init()};j.prototype={_init:function(){var a=this,b=this.options.data,d=this.$options=c('<ul class="'+f+'"></ul>'),e="."+g;if(b)for(var h=0,i=b.length;i>h;h++)d.append(this._createOption(b[h]));d.find("li").on("click",function(){var b=c(this),f=[],h=[];if(a.options.multiple)b.toggleClass(g);else{if(b.is(e))return!1;d.find(e).removeClass(g),b.addClass(g),a.toggle()}d.find("li"+e).each(function(){h.push(this.getAttribute("data-value")),f.push(this.innerHTML)}),a.value=h,a.text=f,a._change()}),c("body").append(d.hide())},_createOption:function(a){return c('<li data-value="'+a.value+'">'+a.text+"</li>")},_setPosition:function(){var a=this.$parent.find("label").outerWidth(),b=this.$parent.offset().left+a,c=this.$parent.offset().top+28,d=this.$parent.find(".input-group").outerWidth()-10-a;this.$options.css({top:c,left:b,width:d})},_clickBlank:function(){var a=this;c(document).mouseup(function(b){var c=a.$options;c.is(b.target)||0!==c.has(b.target).length||a.$options.slideUp(200)})},_change:function(){this.options.onChange&&this.options.onChange.call(this,this.value,this.text)},select:function(a){var c=this.options.data,d=this.$options;if(a=b.isArray(a)||[a],c){d.children().removeClass(g);for(var e in a)d.find("li[data-value="+a[e]+"]").addClass(g)}},toggle:function(){var a=this;this._setPosition(),this.$options.is(":hidden")?this.$options.slideDown(200,function(){a._clickBlank()}):this.$options.slideUp(200)},_destroy:function(){this.$options.remove()}},b.SelectBox=i,c.fn.selectBox=function(a){var b=null;return this.each(function(){var d=c(this),e="object"==typeof a&&a;b=d.data("selectBox"),null!=b&&b._destroy(),d.data("selectBox",b=new i(this,e))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="tabPage-group",e="tabPage-header",f="tabPage-header-leftBtn",g="tabPage-header-rightBtn",h="tabPage-header-tabs-wrap",i="tabPage-header-tabs",j="tabPage-header-tab",k="tabPage-header-tab-close",l=150,m={onFocus:null,onCloseTab:null},n=b.Widgets.extend(function(a,c){this.options=m,this.$tabPageGroup=null,this.$tabs=null,this._pageBodyQueue=[],b.Widgets.apply(this,arguments),this.$element.attr("data-role","tabpage")});c.extend(n.prototype,{_init:function(){this._create()},_create:function(){this.$tabPageGroup=this.$element.addClass(d);var a=[];if(this.$element.children().each(function(){a.push(c(this).detach())}),this._createHeader(),a.length>0)for(var b=0;b<a.length;b++)this.addTab(a[b],a[b].data("title")||"",a[b].data("close"))},_createHeader:function(){var a=this,b=this.$pageHeader=c('<div class="'+e+'"></div>'),d=this.$leftBtn=c('<i class="fa fa-angle-double-left '+f+'"></i>').hide(),i=this.$rightBtn=c('<i class="fa fa-angle-double-right '+g+'"></i>').hide(),j=this.$tabsWrap=c('<div class="'+h+'"></div>');d.click(function(){a._offsetL()}),i.click(function(){a._offsetR()}),b.append(d,i),b.append(j),j.append(this._createTabs()),this.$tabPageGroup.append(b)},_offsetL:function(){var a=this.$tabs.position().left,b=this.$tabs.width(),c=this.$tabsWrap.width();b+a>c&&!this.$tabs.is(":animated")&&this.$tabs.animate({left:"-=150px"},500)},_offsetR:function(){var a=this.$tabs.position().left;0>a&&!this.$tabs.is(":animated")&&this.$tabs.animate({left:"+=150px"},500)},_createTabs:function(){return this.$tabs=c('<ul class="'+i+'"></ul>'),this.$tabs},_closeTab:function(a){var b=a.data("for");void 0!=b&&null!=b&&(this._pageBodyQueue[b]._destroy(),this.options.onCloseTab&&this.options.onCloseTab&&this.options.onCloseTab.call(this,this._pageBodyQueue[b]),this._pageBodyQueue[b]=null,this._pageBodyQueue.splice(b,1),c("li:gt("+b+")",this.$tabs).each(function(){var a=+c(this).data("for");c(this).data("for",a-1)}),a.remove(),0==c(".selected",this.$tabs).length&&(b==this._pageBodyQueue.length&&(b-=1),b>=0&&this.focusTab(this._getTab(b))),this._leftRightBtn())},_leftRightBtn:function(){var a=this.$tabs,b=this._pageBodyQueue.length*l,c=this.$pageHeader.width();a.width(this._pageBodyQueue.length*l),b>c?(this.$leftBtn.show(),this.$rightBtn.show(),this.$pageHeader.addClass("shift")):(this.$leftBtn.hide(),this.$rightBtn.hide(),this.$pageHeader.removeClass("shift"))},_getTab:function(a){return c("li:eq("+a+")",this.$tabs)},addNewTab:function(a,d,e,f,g){d=d||"New Tab",(void 0==e||null==e||"null"==e)&&(e=!0);var h=this,i=this.$tabs,l=c('<li class="'+j+'">'+d+"</li>").data("for",this._pageBodyQueue.length).click(function(){h.focusTab(c(this))}),m=c('<i class="fa fa-close '+k+'"></i>').click(function(){h._closeTab(l)});e&&l.append(m),i.append(l);var n=new b.ContentLoader(this.$tabPageGroup,{content:a,isIframe:f,onReady:g});return this._pageBodyQueue.push(n),this._leftRightBtn(),this.focusTab(l),n},addTab:function(a,b,c,d,e){var f=this.getIndexByContent(a);return f>-1?(this.select(f),this.getTabBody(f)):this.addNewTab(a,b,c,d,e)},getIndexByContent:function(a){for(var b=this._pageBodyQueue,c=0,d=b.length;d>c;c++)if(a==b[c].options.content)return c;return-1},focusTab:function(a){var b=this.$tabs,d=c(".selected",b).removeClass("selected").data("for"),e=a.data("for"),f=150*e,g=150*(e+1);this.$tabs.position().left+f<0&&(this.$tabs.stop(),this.$tabs.animate({left:0-f},1e3)),this.$tabs.position().left+g>this.$tabsWrap.width()&&(this.$tabs.stop(),this.$tabs.animate({left:this.$tabsWrap.width()-g},1e3)),a.addClass("selected"),null!=d&&this._pageBodyQueue[d].hide(),this._pageBodyQueue[a.data("for")].show(),this.options.onFocus&&this.options.onFocus.call(this,a.data("for"))},closeTab:function(a){this._closeTab(this._getTab(a))},select:function(a){this.focusTab(this._getTab(a))},getTabBody:function(a){return this._pageBodyQueue[a]},getTabBodyIndex:function(a){var b=-1;return c.each(this._pageBodyQueue,function(c){return a==this?(b=c,!1):void 0}),b}}),b.TabPage=n,c.fn.tabPage=function(a){var b=null;return this.each(function(){var d=c(this),e="object"==typeof a&&a;b=d.data("tabPage"),null!=b&&b._destroy(),d.data("tabPage",b=new n(this,e))}),b}}(window),!function(a){"use strict";var b=function(b,c){var d=this;this.$element=a(b),this.dataOptions=a.extend({},a.fn.textarea.defaults,c),this.value=this.$element.val(),this.title="",this.$element.attr("title")&&(this.title=this.$element.attr("title")),this.dataOptions.title&&(this.title=this.dataOptions.title),this.id=this.$element.attr("id"),this.name=this.$element.attr("name"),this.$element.attr("placeholder")?this.placeholder=this.$element.attr("placeholder"):this.placeholder="",this.init(),this.setStyle(),this.$element.change(function(){d.check()})};b.prototype.check=function(){var a={length:0,result:!0},b=this.$element.val();return 1==this.dataOptions.required&&(b||(a.required="fail",a.result=!1,a.length++)),a},b.prototype.init=function(){var b=this;this.$element.wrap(a('<div class="eb_textareaGroup" name="'+b.name+'" value="'+b.value+'" data-options="'+b.$element.data("options")+'" id="'+b.id+'_subgroup"></div>')),this.parent=this.$element.parent(),this.parent.data("textarea",b),this.parent.prepend('<div class="eb_title">'+this.title+"</div>"),this.titleObj=this.parent.children(".eb_title"),this.textareaObj=this.$element,this.dataOptions.defaultVal&&this.textareaObj.val(b.dataOptions.defaultVal),1==this.dataOptions.required&&(this.textareaObj.attr("placeholder",b.placeholder+"（必填）"),this.parent.append('<span class="redStar">*</span>')),this.style=this.textareaObj.attr("style"),this.parent.attr("style",b.style),this.setWidth(),this.setHeight(),this.setEvent()},b.prototype.setWidth=function(){if(this.dataOptions.width){var a=this.dataOptions.width;"string"==typeof a&&(a=a.split("px")[0]),this.parent.width(a),this.textareaObj.width(a-86)}if(this.dataOptions.titleWidth||0==this.dataOptions.titleWidth){var b=this.dataOptions.titleWidth;"string"==typeof b&&(b=b.split("px")[0]);var a=this.parent.width(),c=a-b-13;this.textareaObj.width(c),this.titleObj.width(b)}},b.prototype.setValue=function(a){this.textareaObj.val(a),this.parent.attr("value",a)},b.prototype.getValue=function(){return this.textareaObj.val()},b.prototype.clearValue=function(){this.setValue("")},b.prototype.setHeight=function(){if(this.dataOptions.height){var a=this.dataOptions.height;"string"==typeof a&&(a=a.split("px")[0]),this.parent.height(a),this.textareaObj.height(a-6)}},b.prototype.setStyle=function(){var a=this;this.textareaObj.focus(function(){a.textareaObj.addClass("focus")}).blur(function(){a.textareaObj.removeClass("focus")})},b.prototype.check=function(){var a=this,b={length:0,result:!0},c=this.$element.val();return 1==this.dataOptions.required&&(c||(b.required="fail",b.result=!1,b.length++)),"numOnly"==this.dataOptions.validtype&&(this.setNumOnly()?a.value=a.getValue():(b.numOnly="fail",b.result=!1,b.length++,a.setValue(a.value))),b},b.prototype.setEvent=function(){var a=250;this.dataOptions.dblclickTimeSpan&&(a=this.dataOptions.dblclickTimeSpan);var b=this,c=null,d=null,e=null,f=!1,g=!1,h=!1;this.dataOptions.onclickHandler&&(this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onclickHandler?this.textareaObj.get(0).onclick=function(){f||(c=setTimeout(window[this.dataOptions.onclickHandler],a),f=!0,setTimeout(function(){f=!1},a))}:this.textareaObj.get(0).onclick=function(){f||(c=setTimeout(b.dataOptions.onclickHandler,a),f=!0,setTimeout(function(){f=!1},a))}:"string"==typeof this.dataOptions.onclickHandler?this.textareaObj.get(0).onclick=window[this.dataOptions.onclickHandler]:this.textareaObj.get(0).onclick=b.dataOptions.onclickHandler),this.dataOptions.onmousedownHandler&&(this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onmousedownHandler?this.textareaObj.get(0).onmousedown=function(){g||(d=setTimeout(window[this.dataOptions.onmousedownHandler],a),g=!0,setTimeout(function(){g=!1},a))}:this.textareaObj.get(0).onmousedown=function(){g||(d=setTimeout(b.dataOptions.onmousedownHandler,a),g=!0,setTimeout(function(){g=!1},a))}:"string"==typeof this.dataOptions.onmousedownHandler?this.textareaObj.get(0).onmousedown=window[this.dataOptions.onmousedownHandler]:this.textareaObj.get(0).onmousedown=b.dataOptions.onmousedownHandler),this.dataOptions.onmouseupHandler&&(this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onmouseupHandler?this.textareaObj.get(0).onmouseup=function(){h||(e=setTimeout(window[this.dataOptions.onmouseupHandler],a),h=!0,setTimeout(function(){h=!1},a))}:this.textareaObj.get(0).onmouseup=function(){h||(e=setTimeout(b.dataOptions.onmouseupHandler,a),h=!0,setTimeout(function(){h=!1},a))}:"string"==typeof this.dataOptions.onmouseupHandler?this.textareaObj.get(0).onmouseup=window[this.dataOptions.onmouseupHandler]:this.textareaObj.get(0).onmouseup=b.dataOptions.onmouseupHandler),this.dataOptions.ondblclickHandler&&("string"==typeof this.dataOptions.ondblclickHandler?this.textareaObj.get(0).ondblclick=function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(clearTimeout(e),e=null),window[b.dataOptions.ondblclickHandler]()}:this.textareaObj.get(0).ondblclick=function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(clearTimeout(e),e=null),b.dataOptions.ondblclickHandler()}),this.dataOptions.onfocusHandler&&("string"==typeof this.dataOptions.onfocusHandler?this.textareaObj.get(0).onfocus=window[this.dataOptions.onfocusHandler]:this.textareaObj.get(0).onfocus=this.dataOptions.onfocusHandler),this.dataOptions.onblurHandler&&("string"==typeof this.dataOptions.onblurHandler?this.textareaObj.get(0).onblur=window[this.dataOptions.onblurHandler]:this.textareaObj.get(0).onblur=this.dataOptions.onblurHandler),this.dataOptions.onkeypressHandler&&("string"==typeof this.dataOptions.onkeypressHandler?this.textareaObj.get(0).onkeypress=window[this.dataOptions.onkeypressHandler]:this.textareaObj.get(0).onkeypress=this.dataOptions.onkeypressHandler),this.dataOptions.onkeydownHandler&&("string"==typeof this.dataOptions.onkeydownHandler?this.textareaObj.get(0).onkeydown=window[this.dataOptions.onkeydownHandler]:this.textareaObj.get(0).onkeydown=this.dataOptions.onkeydownHandler),this.dataOptions.onkeyupHandler&&("string"==typeof this.dataOptions.onkeyupHandler?this.textareaObj.get(0).onkeyup=window[this.dataOptions.onkeyupHandler]:this.textareaObj.get(0).onkeyup=this.dataOptions.onkeyupHandler),this.dataOptions.onchangeHandler&&("string"==typeof this.dataOptions.onchangeHandler?this.textareaObj.get(0).onchange=window[this.dataOptions.onchangeHandler]:this.textareaObj.get(0).onchange=this.dataOptions.onchangeHandler)},a.fn.textarea=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("textarea"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("textarea",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.textarea.defaults={required:!1,dblclickTimeSpan:250,width:250,height:90,titleWidth:73},a(window).on("load",function(){a(".eb_textarea").each(function(){var b=a(this),c=b.data("options");c?b.textarea(new Function("return {"+c+"}")()):b.textarea(a.fn.textarea.defaults)})})}(window.jQuery),!function(a){"use strict";function b(a){return c.isLeapYear(a)?[31,29,31,30,31,30,31,31,30,31,30,31]:[31,28,31,30,31,30,31,31,30,31,30,31]}var c=a.cri,d=a.jQuery,e="timeInputGroup",f="timeBox",g="fa fa-table",h={value:null,format:"yyyy/MM/dd hh:mm:ss",HMS:!1,enable:!0},i=c.Widgets.extend(function(a,b){this.options=h,this.date=null,this.input=null,this.selectView=null,c.Widgets.apply(this,arguments),this.$element.attr("data-role","timeInput")});i.prototype._init=function(){!this.options.HMS&&this.options.format&&(this.options.format=this.options.format.replace(/\s*[Hh].*$/,"")),this.date=this.options.value||new Date,this.date instanceof Date||(this.date=c.string2Date(this.date));var a=this.$element.attr("role","timeInput");a.wrap('<div class="'+e+'"></div>'),this.$timeInputGroup=a.parent(),this._wrapInput(),this._timeSelectView()},i.prototype._wrapInput=function(){var a=this,b=this.date,d={iconCls:g,handler:function(){a.selectView.toggle()}};this.input=new c.Input(this.$element,{readonly:!0,value:c.formatDate(b,this.options.format),button:d,enable:this.options.enable,onFocus:function(){a.selectView.toggle()}})},i.prototype._timeSelectView=function(){var a=this,b=this.date;this.selectView=new j(this.$timeInputGroup,{value:b,HMS:this.options.HMS,onChange:function(){a.date=this.getDate(),a.input.value(c.formatDate(a.date,a.options.format)),a.options.change&&a.options.change.call(a)}})},i.prototype._setValue=function(a){this.date=a,this.input.value(c.formatDate(a,this.options.format)),this.selectView.setDate(a)},i.prototype._destroy=function(){this.selectView._destroy(),this.$timeInputGroup.replaceWith(this.$element),this.input=null,this.selectView=null},i.prototype.disable=function(){this.input.disable()},i.prototype.enable=function(){this.input.enable()},i.prototype.getFormatValue=function(){return this.$element.val()},i.prototype.value=function(a){return void 0==a?this.date:void(a instanceof Date?this._setValue(a):this._setValue(c.string2Date(a)))},i.prototype._showValidateMsg=function(a){this.input&&this.input._showValidateMsg(a)},i.prototype._hideValidateMsg=function(){this.input&&this.input._hideValidateMsg()};var j=function(a,b){this.$parent=a,this.$timeBox=null,this.$daySelect=null,this.options=d.extend({value:new Date,HMS:!1,onChange:null},b),this.date=c.date2Json(this.options.value),this._create(a)};j.prototype={_create:function(a){var b=this.$timeBox=d('<div class="'+f+'"></div>'),c=d('<div class="titleBar"></div>');c.append(this._yearSelect(),this._monthSelect(),'<span style="position:absolute;top:5px;right:23px;">月</span>'),b.append(c,this._daySelect()),1==this.options.HMS&&b.append(this._hmsSelect()),d("body").append(b)},_yearSelect:function(){var a=this,b=this.date,c=d('<div class="yearSelecter"></div>'),e=d('<i class="toLastYear yearButton fa fa-minus"></i>'),f=d('<i class="toNextYear yearButton fa fa-plus"></i>'),g=d('<span class="year">'+b.yyyy+"</span>");return this.$year=g,e.on("click",function(){g.html(--a.date.yyyy),a._change()}),f.on("click",function(){g.html(++a.date.yyyy),a._change()}),c.append(e,g,"年",f),c},_monthSelect:function(){var a=this,b=this.date,c=d('<select class="monthSelect">');return this.$month=c,d.each([1,2,3,4,5,6,7,8,9,10,11,12],function(a,b){10>b&&(b="0"+b),c.append('<option value="'+a+'">'+b+"</option>")}),c.val(b.MM),c.on("change",function(){a.date.MM=c.val(),a._refreshDaySelect(),a._change()}),c},_daySelect:function(){var a=this.$daySelect=d("<table></table>"),b=d('<tr class="week"></tr>'),c={Sunday:"日",Monday:"一",Tuesday:"二",Wednesday:"三",Thursday:"四",Friday:"五",Saturday:"六"},e=this;this.$day=a;for(var f in c){var g=d("<th>"+c[f]+"</th>");"Sunday"==f&&g.addClass("red"),"Saturday"==f&&g.addClass("red"),b.append(g)}for(var h=0;6>h;h++){for(var i=d('<tr class="days"></tr>'),j=0;7>j;j++){var k=d("<td></td>").on("click",function(){var b=d(this).find(".day-content").text();b&&b!=e.date.dd&&(d("td.choosed",a).removeClass("choosed"),e.date.dd=+b,d(this).addClass("choosed"),e._change())});i.append(k)}a.append(i)}return this._refreshDaySelect(),a},_refreshDaySelect:function(){var a=this.date,c=b(a.yyyy)[a.MM],e=new Date(a.yyyy,a.MM,1).getDay();d("td.choosed",this.$daySelect).removeClass("choosed"),d("tr.days td",this.$daySelect).html("");for(var f=e;c+e>f;f++){var g=f%7,h=Math.floor(f/7),i=d('tr.days:eq("'+h+'") td:eq("'+g+'")',this.$daySelect),j=f-e+1;i.append('<div class="day-content">'+j+"</div>"),j==this.date.dd&&i.addClass("choosed")}},_hmsSelect:function(){var a=this,b=d('<div class="HMSBar"></div>'),c=d('<input class="hour"/>'),e=d('<input class="minute"/>'),f=d('<input class="second"/>');return b.append(c,":",e,":",f),this.hour=c.numberInput({min:0,max:23,onChange:function(){a.date.HH=this.value(),a._change()}}),this.minute=e.numberInput({min:0,max:23,onChange:function(){a.date.mm=this.value(),a._change()}}),this.second=f.numberInput({min:0,max:59,onChange:function(){a.date.ss=this.value(),a._change()}}),b},_change:function(){this.options.onChange&&this.options.onChange.call(this)},_clickBlank:function(){var a=this;d(document).mouseup(function(b){var c=a.$timeBox;c.is(b.target)||0!==c.has(b.target).length||a.$timeBox.slideUp(200)})},_setPosition:function(){var a=this.$parent.offset().left+this.$parent.find("label").outerWidth(),b=this.$parent.offset().top+28;this.$timeBox.css({top:b,left:a})},_destroy:function(){this.$timeBox.remove()},toggle:function(){var a=this;this._setPosition(),this.$timeBox.is(":hidden")?this.$timeBox.slideDown(200,function(){a._clickBlank()}):this.$timeBox.slideUp(200)},getDate:function(){var a=this.date;return new Date(a.yyyy,a.MM,a.dd,a.HH,a.mm,a.ss)},setDate:function(a){this.date=c.date2Json(a),this.$year.text(this.date.yyyy),this.$month.val(this.date.MM),this._refreshDaySelect(),this.options.HMS&&(this.hour.value(this.date.HH),this.minute.value(this.date.mm),this.second.value(this.date.ss))}},d.fn.timeInput=function(a){var b=null;return this.each(function(){var c=d(this),e="object"==typeof a&&a;b=c.data("timeInput"),null!=b&&b._destroy(),c.data("timeInput",b=new i(this,e))}),b}}(window),!function(a){"use strict";function b(a){var b=e('<i class="'+a+'"></i>');return b}function c(a){var c=e("<li></li>");return a.iconCls&&c.append(b(a.iconCls)),a.text&&c.append(a.text),a.handler&&c.on("click",a.handler),c}var d=a.cri,e=a.jQuery,f={buttons:[]},g="toolbar",h=d.Widgets.extend(function(a,b){this.options=f,this.$toolBar=null,d.Widgets.apply(this,arguments)});e.extend(h.prototype,{_eventListen:function(){},_init:function(){this._create(this.$element)},_create:function(a){for(var b=this.options,d=b.buttons,f=this.$toolBar=e('<ul class="'+g+'"></ul>'),h=0,i=d.length;i>h;h++){var j=d[h];f.append(c(j))}a.append(f)}}),d.ToolBar=h}(window),!function(a){"use strict";var b=a.jQuery,c=a.cri,d=31,e=31,f=16,g={file:"icon fa fa-file",folderOpen:"icon fa fa-folder-open",folderClose:"icon fa fa-folder"},h={title:null,toolbar:null,url:null,param:null,async:!1,asyncUrl:null,page:!0,onSelected:null,onDblClick:null},i=c.Tree=c.Widgets.extend(function(a,b){this.options=h,this.$tree=null,this.$treebody=null,this.selectedRow=null,this.toolbar=null,this.rows=null,this._className="tree",c.Widgets.apply(this,arguments),this.$element.attr("data-role","tree")});b.extend(i.prototype,{_eventListen:function(){var a=this,b=a.options;this.$treebody.on("click","div.li-content",function(c){return a._select(c),a._fold(c),b.onSelected&&b.onSelected.call(a,a.selectedRow),!1}).on("dblclick","div.li-content",function(c){return a._select(c),b.onDblClick&&b.onDblClick.call(a,a.selectedRow),!1})},_init:function(){this._getData(),this._createTree(),this.options.onLoad&&"function"==typeof this.options.onLoad&&this.options.onLoad.call(this)},_getData:function(){var a=this;return b.ajax({type:"post",url:this.options.url,success:function(b){a.rows=b.rows},data:this.options.param,dataType:"JSON",async:!1}),!0},_createTree:function(){var a=this.options,c=this.$element._getHeightPixelValue(a.height),f=this.$element._getWidthPixelValue(a.width),g=b("<div></div>").addClass(this._className).width(f),h=this.$treeview=b("<div></div>").addClass("tree-view"),i=this.$treebody=b("<ul></ul>").addClass("tree-body");g.attr("style",this.$element.attr("style")).show().height(c),h.append(i),c&&(this.options.title&&(c-=d),this.options.toolbar&&(c-=e),this.$treeview.css("height",c)),this.$element.wrap(g),this.$element.hide(),this.$tree=this.$element.parent(),this._createTitle(this.$tree),this._createToolbar(this.$tree),this._eachNode(i,this.rows,"show",0,0),this.$tree.append(h)},_appendChildren:function(a,c){var d=b("<ul></ul>"),e=1e3*b(".li-content",a).data("uid"),g=+b("i",a).css("marginLeft").split("px")[0];g+=f,this._eachNode(d,c,"show",e,g),a.append(d)},_eachNode:function(a,c,d,e,h){for(var i=0,j=c.length;j>i;i++){var k=c[i],l=b("<li></li>"),m=b('<span class="li-text">'+k.text+"</span>"),n=b('<i class="'+g.file+'"></i>').css("marginLeft",h),o=b('<div class="li-content"></div>').data("uid",++e);if(this._dealNodeData(k),n.attr("class",g[k.iconType]),a.append(l.append(o.append(n,m))),"hide"==d&&l.hide(),k.hasChildren&&k.children&&k.children.length){var p=b("<ul></ul>");l.append(p),h+=f,k.state&&"close"==k.state?this._eachNode(p,k.children,"hide",1e3*e,h):this._eachNode(p,k.children,d,1e3*e,h),h-=f}}},_dealNodeData:function(a){a.iconType="file",a.children&&a.children.length>0&&(a.hasChildren=!0),a.hasChildren&&((void 0==a.state||null==a.state)&&(a.state="open"),a.state&&"open"==a.state&&a.children&&a.children.length>0?a.iconType="folderOpen":(a.state="close",a.iconType="folderClose"))},_createTitle:function(a){this.options.title&&(this.$title=b('<div class="title"><span>'+this.options.title+"</span></div>"),a.append(this.$title))},_createToolbar:function(a){this.options.toolbar&&(this.toolbar=new c.ToolBar(a,{buttons:this.options.toolbar}))},_fold:function(a){var c=this.options,d=this,e=b(a.target).closest("div"),f=b(a.target).closest("li"),g=b("i",e);if(g.is(".fa-folder")?g.removeClass("fa-folder").addClass("fa-folder-open"):g.removeClass("fa-folder-open").addClass("fa-folder"),!d.selectedRow.children&&c.async){var h={};b.each(d.selectedRow,function(a,b){"children"!=a&&(h[a]=b)}),d.selectedRow.children||b.ajax({type:"get",url:c.asyncUrl,success:function(a){d.selectedRow.children=a.rows,d._appendChildren(f,a.rows)},data:h,dataType:"JSON",async:!1})}else this._expand(f)},_expand:function(a){var c=a.children("ul");c.length&&c.children("li").each(function(){b(this).animate({height:"toggle"},500)})},_select:function(a){var c=b(a.target).closest("div"),d=c.data("uid");this.selectedRow=this._getDataById(d)},_getDataById:function(a){var b=null;return!function(c){for(var d=[];a>=1;){var e=a%1e3;d.push(e),a=Math.floor(a/1e3)}for(var f=d.length-1;f>=0;f--){var g=d[f]-1;c[g]&&(b=c[g])&&(c=c[g].children)}}(this.rows),b},getSelected:function(){return this.selectedRow},reload:function(a){a&&(this.options.param=a),this._init()}}),b.fn.tree=function(a){var c=null;return this.each(function(){var d=b(this),e="object"==typeof a&&a;d.data("tree",c=new i(this,e))}),c}}(window),!function(a){var b=a.jQuery,c=a.cri,d=c.TreeGrid=c.Grid.extend(function(a,b){this._gridClassName="treegrid",c.Grid.apply(this,arguments),this._selfEvent(),this.$element.attr("data-role","treegrid")});d.prototype._selfEvent=function(){var a=this;this.$gridbody.on("click","tr td.line-file-icon i",function(b){a._fold(b),b.preventDefault()})},d.prototype._refreshBody=function(){function a(a,c,d,e){var f={file:"fa fa-file",folderOpen:"fa fa-folder-open",folderClose:"fa fa-folder"};b.each(c,function(c){var g=b("<td></td>"),h=null==d[this.field]?"":d[this.field];if("text"==this.field){var i=b("<i></i>").attr("class",f.file);(d.hasChildren||d.children&&d.children.length)&&("closed"==d.state?i.attr("class",f.folderClose):i.attr("class",f.folderOpen)),g.css("text-indent",e).addClass("line-file-icon").append(i).append(h)}else g.text(h);a.append(g)})}var c=this.$gridbody,d=b("<table></table>"),e=this.options,f=this._columns,g=1,h=1,i=this,j=6;d.append(this._createColGroup(c.width())),this._selectedId=[],!function l(c,k,m){for(var n=0,o=c.length;o>n;n++){var p=b("<tr></tr>").data("rowid",++m).attr("data-rowid",m),q=c[n];"show"==k||p.hide(),e.checkBox&&(q.check?(p.addClass("selected"),p.append(b("<td></td>").addClass("line-checkbox").append('<input type="checkbox" checked/>')),i._selectedId.push(m)):p.append(b("<td></td>").addClass("line-checkbox").append('<input type="checkbox"/>'))),e.rowNum&&p.append(b("<td></td>").addClass("line-number").append(g++)),a(p,f,q,h),d.append(p),q.children&&q.children.length>0&&(q.hasChildren=!0,h+=j,q.state&&"closed"==q.state?l(q.children,"hide",1e3*m):l(q.children,k,1e3*m),h-=j)}}(this._rows,"show",0),this.$gridbody.removeClass("loading").html(d),b("tr:nth-child(odd)",d).css("background","#FFF");var k=c.width()-c.prop("clientWidth");this.$gridhead.css("paddingRight",k)},d.prototype._fold=function(a){var c=this.options,d=b(a.target).closest("tr"),e=d.data("rowid"),f=this;if(this.selectedRow=this._getRowDataById(e),"closed"==this.selectedRow.state){if(this.selectedRow.state="open",c.async&&!this.selectedRow.children){var g={};b.each(this.selectedRow,function(a,b){"children"!=a&&(g[a]=b)}),this.selectedRow.childrenList||b.ajax({type:"post",url:c.asyncUrl,success:function(a,b){f.selectedRow.children=a.rows},data:g,dataType:"JSON",async:!1})}}else this.selectedRow.state="closed";this._refreshBody()},d.prototype._checkbox=function(a){var c=b(a.target),d=b(a.target).closest("tr"),e=parseInt(d.data("rowid")),f=e,g=this._getRowDataById(e),h=c.prop("checked");!function(a){a.children&&a.children.length>0&&(f*=1e3,!function c(a){b.each(a,function(){f+=1,b("tr[data-rowid="+f+"] input[type=checkbox]").prop("checked",h),this.children&&this.children.length>0&&(f*=1e3,c(this.children),f=Math.floor(f/=1e3))})}(a.children))}(g)},d.prototype._getRowDataById=function(a){var b=(this.options,null);return a=parseInt(a),!function(c){for(var d=[];a>=1;){var e=a%1e3;d.push(e),a=Math.floor(a/1e3)}for(var f=d.length-1;f>=0;f--){var g=d[f]-1;c[g]&&(b=c[g])&&(c=c[g].children)}}(this._rows),b},b.fn.treegrid=function(a){var c=null;return this.each(function(){var e=b(this),f="object"==typeof a&&a;c=e.data("treegrid"),c&&c.$grid.before(e).remove(),e.data("treegrid",c=new d(this,f))}),c}}(window),!function(a){"use strict";function b(a,b){return"string"==typeof b&&(b=new RegExp("^(?:"+b+")$")),b.test(a)}function c(a,c,d){var e=a.val();return a.filter(c).length&&""!==e?b(e,d):!0}function d(a,b){return a.length?null!=a[0].attributes[b]:!1}var e=a.cri,f=a.jQuery,g=":input:not(:button,[type=submit],[type=reset],[disabled])",h="[role=number],[role=range]",i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,j=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,k=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/i,l=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])(\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])){3}$/i,m={
required:function(a){var b=a.filter("[type=checkbox]").length&&!a.is(":checked"),c=a.val();return!(d(a,"required")&&(""===c||!c||b))},pattern:function(a){return a.filter("[role=text]").filter("[pattern]").length&&""!==a.val()?b(a.val(),a.attr("pattern")):!0},min:function(a){if(a.filter(h).filter("[min]").length&&""!==a.val()){var b=parseFloat(a.attr("min"))||0,c=parseFloat(a.val());return c>=b}return!0},max:function(a){if(a.filter(h).filter("[max]").length&&""!==a.val()){var b=parseFloat(a.attr("max"))||0,c=parseFloat(a.val());return b>=c}return!0},email:function(a){return c(a,"[role=email]",i)},url:function(a){return c(a,"[role=url]",j)},number:function(a){return a.filter(h).length&&a.val()?e.isNum(a.val()):!0},tel:function(a){return c(a,"[role=tel]",k)},ip:function(a){return c(a,"[role=ip]",l)}},n={required:"该值不能为空",min:"请输入大于的数字",max:"请输入小于的数字",email:"请输入有效的邮箱地址",url:"请输入有效的URL地址",number:"请输入数字",tel:"请输入有效的号码",pattern:"该值无效,请重新输入",ip:"请输入有效IP地址"},o={rules:m,messages:n,validateOnBlur:!1},p=e.Widgets.extend(function(a,b){this.options=o,e.Widgets.apply(this,arguments)});f.extend(p.prototype,{_eventListen:function(){var a=this,b=this.$element;this.$element.is("form")&&this.$element.on("submit",function(){a.validate()}),a.options.validateOnBlur&&(b.is(g)?b.on("blur",function(){a._validateInput(b)}):(b.find(g).each(function(){f(this).on("change",function(){a._validateInput(f(this))}),f(this).is("[role=timeInput]")||f(this).on("blur",function(){a._validateInput(f(this))})}),b.find("select").each(function(){f(this).on("change",function(){a._validateInput(f(this))})})))},_checkValidity:function(a){var b,c=this.options.rules;for(b in c)if(!c[b].call(this,a))return{valid:!1,key:b};return{valid:!0}},validate:function(){var a=this,b=this.$element,c=!0;return b.is(g)?c=c&&a._validateInput(b):b.find(g).each(function(){var b=a._validateInput(f(this));c=c&&b}),c},_validateInput:function(a){var b=this,c=this._checkValidity(a),d=c.valid;if(d)this._hideMessage(a.attr("name"));else{var e=this.options.messages[c.key];"min"==c.key&&(e="请输入不小于"+a.attr("min")+"的数字"),"max"==c.key&&(e="请输入不大于"+a.attr("max")+"的数字"),this._showMessage(a,e),a.is("[readonly=readonly]")&&a.closest(".input-group").one("click",function(){b._hideMessage(a.attr("name"))}),a.one("focus",function(){b._hideMessage(a.attr("name"))})}return d},_showMessage:function(a,b){b=a.attr("error-msg")||b||"请检查";var c=a.data(a.data("role"));c&&c._showValidateMsg(b)},_hideMessage:function(a){var b=f("input[name="+a+"],select[name="+a+"]"),c=b.data("role")&&b.data(b.data("role"));c&&"function"==typeof c._hideValidateMsg&&c._hideValidateMsg()},hideMessages:function(a){if(a)if(e.isArray(a))for(var b=0,c=a.length;c>b;b++)this._hideMessage(a[b]);else this._hideMessage(a);else f(".input-warm",this.$element).hide()}}),e.Validator=p,f.fn.validator=function(a){var b=null;return this.each(function(){var c=f(this),d="object"==typeof a&&a;b=c.data("validator"),c.data("validator",b=new p(this,d))}),b}}(window),!function(a){"use strict";function b(a,b){return a=""+a,/^-?\d+%$/g.test(a)?Math.floor(b*a.split("%")[0]/100):/^\d+px$/g.test(a)?parseInt(a.split("px")[0]):parseInt(a)||0}function c(a,b){return a=""+a,/^-?\d+%$/g.test(a)?Math.floor(b*a.split("%")[0]/100):/^\d+px$/g.test(a)?parseInt(a.split("px")[0]):parseInt(a)||0}var d=a.cri,e=a.jQuery,f="window-head",g={Minimize:"fa fa-minus",Maximize:"fa fa-expand",Close:"fa fa-close",Resume:"fa fa-compress"},h=150,i=1,j=1e4,k={title:"",actions:["Close","Minimize","Maximize"],content:null,isIframe:!1,visible:!0,modal:!1,width:600,height:400,position:{top:0,left:0},center:!0,resizable:!0,dragable:!0,onReady:null,onOpen:null,onClose:null,onMaximize:null,onMinimize:null,onResume:null},l=d.Widgets.extend(function(a,b){this.options=k,this.windowStatus="normal",this.contentLoader=null,this.$elementPlaceHolder=null,d.Widgets.apply(this,arguments),this.windowStack.push(this),this.toFront(),this.$element.attr("data-role","treegrid")});e.extend(l.prototype,{windowStack:[],mask:null,_initOptions:function(a){this.options=e.extend(!0,{},this.options,a),a.actions&&a.actions.length&&(this.options.actions=a.actions)},_eventListen:function(){var a=this;this.options.dragable&&this.$window.on("mousedown",".window-head",function(b){var c=+a.$window.css("left").split("px")[0],d=+a.$window.css("top").split("px")[0],f=+a.$window.width(),g=+a.$window.height(),h=b.pageX,i=b.pageY;e(document).on("mousemove",function(b){var e=b.pageX,j=b.pageY,k=e-h,l=j-i;c+=k,d+=l,h=e,i=j,a._setPosition({top:d,left:c,width:f,height:g})})}),this.$window.on("click",".action",function(){var b=a._actionForButton(e(this));return b&&"function"==typeof a[b]&&a[b](),!1}).on("click",".window-head",function(){a.toFront()}).on("mousedown",".window-resizer",function(b){var c=+a.$window.css("left").split("px")[0],d=+a.$window.css("top").split("px")[0],f=+a.$window.width(),g=+a.$window.height(),h=b.pageX,i=b.pageY,j=/[ewsn]+$/.exec(this.className)[0];e(document).on("mousemove",function(b){var e=b.pageX,k=b.pageY,l=e-h,m=k-i;h=e,i=k,j.indexOf("e")>=0&&(f+=l),j.indexOf("w")>=0&&(c=e,f-=l),j.indexOf("n")>=0&&(d=k,g-=m),j.indexOf("s")>=0&&(g+=m),a._setPosition({top:d,left:c,width:f,height:g})})}),e(document).on("mouseup",function(){e(document).off("mousemove")})},_init:function(){var d=this.options;d.width=b(d.width,e(a).width())-2*i,d.height=c(d.height,e(a).height())-2*i,this._createBody(),this._createHead(),d.resizable&&this._createResizeHandler(),e("body").append(this.$window),this.$element.show(),d.visible?this.$window.show():this.$window.hide()},_createHead:function(){var a=e('<div class="'+f+'"></div>');a.append(this._createTitle()).append(this._createActions()),this.$window.prepend(a),this.$windowHead=a},_createBody:function(){var b=this.options,c=e(a).width(),d=e(a).height(),f=this.$element,g=e('<div class="window"></div>'),h=e('<div class="window-content"></div>'),j=this.$elementPlaceHolder=e('<div style="display:none"></div>');f.after(j),f.detach(),this.$window=g,b.center&&(b.position.left=(c-b.width-2*i)/2,b.position.top=(d-b.height-2*i)/2),this._setPosition({top:b.position.top,left:b.position.left,width:b.width,height:b.height}),h.height(b.height-35),g.append(h),h.append(f),e("body").append(this.$window),this.load(this.options.content)},_createTitle:function(){var a=this.options.title||"";return e("<span></span>").addClass("title").text(a)},_createActions:function(){for(var a=this.options,b=e("<div></div>").addClass("actions"),c=a.modal?["Maximize","Close"]:["Minimize","Maximize","Close"],d=0,f=c.length;f>d;d++)for(var h=c[d],i=0,j=a.actions.length;j>i;i++){var k=a.actions[i];if(k==h){var l=e('<span class="action"></span>').addClass(k.toLowerCase()),m=e('<i class="'+g[k]+'"></i>');b.append(l),l.append(m)}}return b},_createResizeHandler:function(){var a=[],b="n e s w nw ne se sw";e.each(b.split(" "),function(b,c){a.push('<div class="window-resizer window-resizer-'+c+'" style="display: block;"></div>')}),this.$window.append(a.join(""))},_showMask:function(a){var b=l.prototype.mask;b?(b.css("zIndex",a).show(),e("body").css("overflow","hidden")):(b=l.prototype.mask=e("<div></div>").addClass("overlay").css("zIndex",a),e("body").append(b).css("overflow","hidden"))},_hideMask:function(){var a=l.prototype.mask;a&&a.hide(),e("body").css("overflow","auto")},_setPosition:function(a){var b=this.$window;b.css(a),this.options.position=a},_actionForButton:function(a){var b=/\baction \w+\b/.exec(a[0].className)[0];return{"action minimize":"minimize","action maximize":"maximize","action resume":"resume","action close":"close"}[b]},_setStyleByStatus:function(a){var b=this.options,c=b.position,d={minimize:"window mini-window",maximize:"window maxi-window",closed:"window",normal:"window"},e={width:b.width,height:b.height,left:c.left,top:c.top,bottom:"auto",right:"auto"};this.$window.prop("class",d[a]).css(e)},_setButtons:function(a){var b={minimize:["resume","close"],maximize:["resume","close"],normal:["minimize","maximize","close"]},c=e(".actions",this.$window);if(e(".action",c).hide(),"minimize"==a){var d=e(".maximize",c).removeClass("maximize").addClass("resume");e("i",d).prop("class",g.Maximize)}if("maximize"==a){var d=e(".maximize",c).removeClass("maximize").addClass("resume");e("i",d).prop("class",g.Resume)}if("normal"==a){var d=e(".resume",c).removeClass("resume").addClass("maximize");e("i",d).prop("class",g.Maximize)}e.each(b[a],function(a,b){e("."+b,c).show()})},_moveLeft:function(a){this.$window.css("left",h*a)},_destroy:function(){var a=this.$element.hide(),b=a.parents(".window"),c=this.windowStack.indexOf(this);c>=0&&this.windowStack.splice(c,1),this.$elementPlaceHolder.after(a),this.$elementPlaceHolder.remove(),this.$elementPlaceHolder=null,b.remove(),a.hide(),a.data("window",null)},open:function(){this._setStyleByStatus("normal"),e(".window-content",this.$window).show(),this.windowStatus="normal",this.options.onOpen&&this.options.onOpen.call(this)},close:function(){this.options.onClose&&this.options.onClose.call(this),this._destroy(),this.windowStack.length?this.windowStack[this.windowStack.length-1].toFront():this._hideMask()},maximize:function(){this._setStyleByStatus("maximize"),this._setButtons("maximize"),this.windowStatus="maximize",this.options.onMaxmize&&this.options.onMaxmize.call(this)},minimize:function(){this._setButtons("minimize"),e(".window-content",this.$window).hide();var a=e(".mini-window").size()*h;this._setStyleByStatus("minimize"),this.$window.css("left",a),this.windowStatus="minimize",this.options.onMinimize&&this.options.onMinimize.call(this)},resume:function(){if(this._setButtons("normal"),this._setStyleByStatus("normal"),e(".window-content",this.$window).show(),"minimize"==this.windowStatus){var a=0;this.windowStatus="normal",e.each(l.prototype.windowStack,function(b,c){"minimize"==c.windowStatus&&c._moveLeft(a++)})}this.windowStatus="normal",this.options.onResume&&this.options.onResume.call(this)},toFront:function(){this._hideMask();var a=this.windowStack,b=a.indexOf(this);a.splice(b,1),a.push(this);for(var c=a.length,d=c-1;d>=0;d--){if(a[d].options.modal){for(var e=0;c>e;e++)d>e?a[e].$window.css("zIndex",j+e):a[e].$window.css("zIndex",j+e+1);this._showMask(j+d);break}a[d].$window.css("zIndex",j+d)}},load:function(a){var b=this.$element,c=this,f=this.options,g=e('<i class="fa fa-spinner fa-spin"></i>').addClass("loadingIcon");a?(b.empty(),b.addClass("loading").html(g),this.contentLoader=new d.ContentLoader(b,{content:a,isIframe:f.isIframe,onReady:function(){b.removeClass("loading"),g.remove(),f.onReady&&f.onReady.call(c,c.$window)}})):f.onReady&&f.onReady.call(c,c.$window)}}),d.Window=l,e.fn.window=function(a){var b=null;return this.each(function(){var c=e(this),d=c.data("window"),f="object"==typeof a&&a;null!=d&&d.close(),c.data("window",b=new l(this,f))}),b}}(window);