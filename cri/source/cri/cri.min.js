!function(a){function b(){}a.cri={},b.extend=function(a){var b=function(a){function b(){}return b.prototype=a,new b}(this.prototype);return b.constructor=a,a.prototype=b,a.extend=this.extend,a},cri.Class=b,cri.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)},cri.getFormValue=function(a){var b={};return $("input[name],select[name],textarea[name]",a).each(function(){if($(this).is("[type=checkbox]")){if(!$(this).prop("checked"))return!0;b[this.name]=this.value}b[this.name]=$(this).is("select")?$(this).val():this.value}),b},cri.setFormValue=function(a,b){for(var c in b)$("[name="+c+"]",a).val(b[c])},$.fn.formValue=function(a){return arguments.length>0?void cri.setFormValue($(this),a):cri.getFormValue($(this))},cri.isLeapYear=function(a){return 0==a%4&&(a%100!=0||a%400==0)},cri.formatDate=function(a,b){var c=b,d=a.getFullYear(),e=a.getMonth()+1,f=a.getDate(),g=a.getHours(),h=a.getMinutes(),i=a.getSeconds();return c=c.replace(/yyyy|YYYY/,d),c=c.replace(/yy|YY/,d%100>9?(d%100).toString():"0"+d%100),c=c.replace(/MM/,e>9?e.toString():"0"+e),c=c.replace(/M/g,e),c=c.replace(/dd|DD/,f>9?f.toString():"0"+f),c=c.replace(/d|D/g,f),c=c.replace(/hh|HH/,g>9?g.toString():"0"+g),c=c.replace(/h|H/g,g),c=c.replace(/mm/,h>9?h.toString():"0"+h),c=c.replace(/m/g,h),c=c.replace(/ss|SS/,i>9?i.toString():"0"+i),c=c.replace(/s|S/g,i)},cri.date2Array=function(a){return[a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds()]},cri.date2Json=function(a){return{yyyy:a.getFullYear(),MM:a.getMonth(),dd:a.getDate(),HH:a.getHours(),mm:a.getMinutes(),ss:a.getSeconds(),ww:a.getDay()}},cri.string2Date=function(a){var b=a.split(" "),c=b[0],d=b[1],e=c.split(/[\/,-]/);if(d){var f=d.split(":");return new Date(e[0],--e[1],e[2],f[0],f[1],f[2])}return new Date(e[0],--e[1],e[2])},cri.parseJSON=function(a){return a?new Function("return "+a)():{}},cri.isNum=function(a){return null!=a&&""!=a?!isNaN(a):!1},cri.isPhoneNo=function(a){return/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/.test(a)}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d=b.Class.extend(function(a,b){this.$element=c(a),this._initOptions(b),this._init(),this._eventListen()});d.prototype._initOptions=function(a){this.options=c.extend(!0,{},this.options,a)},d.prototype._init=function(){},d.prototype._eventListen=function(){},d.prototype._destory=function(){var a=this.$element,b=a.parent();b.after(a).remove()},b.Widgets=d}(window),!function(a){"use strict";function b(a,b){var c=a[0].style.height,d=a[0].height,e=b||c||d;if(!e)return null;var f=(""+e).split("%");return f.length>1&&(e=Math.floor(a.parent().height()*f[0]/100)),(e=(""+e).split("px")[0])?parseInt(e):void 0}function c(a,b){var c=b||function(){var b="[";return e("tr th,td",a).each(function(){var a=e(this).data("options"),c=e(this).html();b+=a?"{title:'"+c+"',"+a+"},":"{title:'"+c+"'},"}),b+="]",b=b.replace(/\},\]/g,"}]").replace(/\],\]/g,"]]"),new Function("return "+b)()}();return e.map(c,function(a){return a.field&&a.width&&(a._width=a.width),a}),c}var d=a.cri,e=a.jQuery,f=31,g=31,h=41,i=31,j=5,k={title:null,height:null,width:null,toolbar:null,url:null,param:{},checkBox:!1,rowNum:!0,columns:null,pagination:!0,page:1,pageSize:10,onChange:null,onDblClick:null,onSelected:null,onLoad:null,ajaxDone:null,ajaxError:null},l=d.Widgets.extend(function(a){this.options=k,this.$element=e(a),this.$grid=null,this.$gridhead=null,this.$gridbody=null,this.toolbar=null,this.pager=null,this.$title=null,this._rows=null,this._columns=[],this._selectedId=[],this._gridClassName=this._gridClassName||"datagrid",d.Widgets.apply(this,arguments)});e.extend(l.prototype,{_eventListen:function(){var b=this,c=this.options,d=0,f=null;this.$gridbody.on("scroll",function(){e(".grid-head-wrap",b.$gridhead).scrollLeft(e(this).scrollLeft())}).on("click","tr",function(c){null!=f&&clearTimeout(f),f=a.setTimeout(function(){e("input[type=checkbox]",b.$gridhead).prop("checked",!1),b._setSelected(c),b.options.onChange&&b.options.onChange.call(b)},300)}).on("dblclick","tr",function(a){clearTimeout(f),b._onDblClickRow(a)}),e(document).on("mouseup",function(){b.$gridhead.css("cursor",""),e(document).off("mousemove")}),this.$gridhead.on("mousedown",".drag-line",function(a){b.$gridhead.css("cursor","e-resize");var f=0;c.rowNum&&f++,c.checkBox&&f++,f+=e(this).data("drag");var g=e("col:eq("+f+")",b.$gridhead);d=a.pageX,e(document).on("mousemove",function(a){var c=a.pageX-d,h=+g.width()+c,i=e("table",b.$gridhead).width();d=a.pageX,console.log(h),h>=j&&(e("table",b.$gridbody).width(i+c),e("table",b.$gridhead).width(i+c),e("col:eq("+f+")",b.$gridhead).width(h),e("col:eq("+f+")",b.$gridbody).width(h))})}).on("click","input[type=checkbox]",function(a){var d=e(a.target).prop("checked");d?(b._selectedId=[],e("tr",b.$gridbody).each(function(){var a=e(this);b._selectedId.push(a.data("rowid")),a.addClass("selected"),e("input[type=checkbox]",a).prop("checked",d)})):(b._selectedId=[],e("tr",b.$gridbody).removeClass("selected")),e("input[type=checkbox]",b.$gridbody).each(function(){e(this).prop("checked",d)}),c.onChange&&c.onChange.call(b)})},_init:function(){this._columns=c(this.$element,this.options.columns),this._createGrid(),this._createPage(),this._getData(),this.options.onLoad&&"function"==typeof this.options.onLoad&&this.options.onLoad.call(this),this._colsWidth()},_createGrid:function(){var a=b(this.$element,this.options.height),c=e("<div></div>").addClass("grid").addClass(this._gridClassName);c.attr("style",this.$element.attr("style")).show().css("height",a),this.$element.wrap(c),this.$element.hide(),this.$grid=this.$element.parent(),this._createTitle(this.$grid),this._createToolbar(this.$grid),this._createGridView(this.$grid,a)},_createGridView:function(a,b){this.$gridview=e("<div></div>").addClass("grid-view"),this.$gridhead=e("<div></div>").addClass("grid-head"),a.append(this.$gridview.append(this.$gridhead).append(this.$gridbody)),b&&(b-=i,this.options.title&&(b-=f),this.options.toolbar&&(b-=g),this.options.pagination&&(b-=h)),this._createHead(this.$gridhead),this.$gridbody=this._createBody(b),this.$grid.append(this.$gridbody)},_createTitle:function(a){this.options.title&&(this.$title=e('<div class="title"><span>'+this.options.title+"</span></div>"),a.append(this.$title))},_createHead:function(a){var b=e("<div></div>").addClass("grid-head-wrap"),c=e("<table></table>"),d=e("<tr></tr>"),f=this.options,g=this._columns;if(c.append(this._createColGroup(a.width())),f.checkBox){var h=e("<td></td>").addClass("line-checkbox").append('<span class="td-content"><input type="checkbox"/></span>');d.append(h)}if(f.rowNum){var i=e("<td></td>").addClass("line-number").append('<div class="td-content"></div>');d.append(i)}for(var j=0,k=g.length;k>j;j++){var l=e("<td></td>"),m=e("<div></div>").addClass("drag-line").data("drag",j),n=e("<div></div>").addClass("td-content grid-header-text"),o=g[j];for(var p in o){var q=o[p];"title"==p?n.prop("title",q).append(q):"field"!==p&&"width"!==p&&l.css(p,q)}l.append(n),k-1>j&&l.append(m),d.append(l)}c.append(d),a.html(b.html(c))},_createBody:function(a){var b=e('<div class="grid-body loading"></div>'),c=e('<i class="fa fa-spinner fa-spin"></i>').addClass("loadingIcon");return a&&b.height(a),b.append(c),b},_refreshBody:function(){var a=e("<table></table>"),b=this.options,c=0,d=1+b.pageSize*(b.page-1),f=this._columns,g=this._rows;this._selectedId=[],a.append(e("colgroup",this.$gridhead).clone());for(var h=0,i=g.length;i>h;h++){var j=g[h],k=e("<tr></tr>").data("rowid",c);b.checkBox&&k.append(e("<td></td>").addClass("line-checkbox").append('<input type="checkbox"/>')),b.rowNum&&k.append(e("<td></td>").addClass("line-number").append(d));for(var l=0,m=f.length;m>l;l++){var n=e("<td></td>"),o=e("<div></div>").addClass("td-content"),p=f[l],q=null==j[p.field]?"":j[p.field],r=(""+q).replace(/<.\w+\s*[^<]+>/g,"");o.prop("title",r).text(r),n.append(r),k.append(n)}d++,c++,a.append(k)}this.$gridbody.removeClass("loading").html(a),e("tr:nth-child(odd)",a).css("background","#FFF");var s=this.$gridbody.prop("clientWidth");if(s){var t=this.$gridbody.width()-s;this.$gridhead.css("paddingRight",t)}},_createColGroup:function(){var a=e("<colgroup></colgroup>"),b=this.options,c=this._columns,d=0;b.checkBox&&a.append(e("<col/>").width(30))&&(d+=30),b.rowNum&&a.append(e("<col/>").width(25))&&(d+=20);for(var f=0,g=c.length;g>f;f++){var h=e("<col/>"),i=c[f]._width||"auto";h.width(i),a.append(h)}return a},_createToolbar:function(a){this.options.toolbar&&(this.toolbar=new d.ToolBar(a,{buttons:this.options.toolbar}))},_createPage:function(){var a=this.options,b=this;this.options.pagination&&(this.pager=new d.Pager(this.$grid,{page:a.page,pageSize:a.pageSize,total:0,rowsLen:0,onPage:function(c,d){a.page=c,a.pageSize=d,b._getData()}}))},_getData:function(){var a=!0,b=this.options,c=this;return b.pagination&&(b.param.page=b.page,b.param.rows=b.pageSize),e.ajax({type:"post",url:this.options.url,success:function(a){if(b.ajaxDone){var d=b.ajaxDone.call(c,a);d&&(a=d)}c._rows=a.rows||[],b.total=a.total||0,c.pager&&c.pager.update(b.page,b.pageSize,b.total,c._rows.length),c._refreshBody(c.$gridbody)},error:function(){c._rows=[],b.total=0,c.pager&&c.pager.update(b.page,b.pageSize,b.total,c._rows.length),c._refreshBody(c.$gridbody)},data:b.param,dataType:"JSON",async:!1}),a},_setSelected:function(a){var b=e(a.target).closest("tr"),c=b.data("rowid");if(this.options.checkBox)if(b.hasClass("selected")){var d=e.inArray(c,this._selectedId);d>=0&&this._selectedId.splice(d,1),b.removeClass("selected"),e("input[type=checkbox]",b).prop("checked",!1)}else this._selectedId=this._selectedId||[],b.addClass("selected"),this._selectedId.push(c),this.options.checkBox&&e("input[type=checkbox]",b).prop("checked",!0);else b.hasClass("selected")?(b.removeClass("selected"),this._selectedId=[]):(e("tr.selected",this.$gridbody).removeClass("selected"),b.addClass("selected"),this._selectedId=[c]);this._selectedId&&this._selectedId.length&&this.options.onSelected&&this.options.onSelected.call(this)},_colsWidth:function(){var a=this;e("tr:eq(0) td",this.$gridhead).each(function(b){e("col:eq("+b+")",a.$gridbody).width(e(this).width()+8),e("col:eq("+b+")",a.$gridhead).width(e(this).width()+8)})},_getRowDataById:function(a){return this._rows[parseInt(a)]},_onDblClickRow:function(a){var b=this,c=this.options,d=e(a.target).closest("tr"),f=d.data("rowid");this._selectedId=[f],e("tr.selected",this.$gridbody).removeClass("selected"),d.addClass("selected"),this.options.checkBox&&(e("input[type=checkbox]",this.$gridbody).prop("checked",!1),e("input[type=checkbox]",d).prop("checked",!0)),c.onDblClick&&c.onDblClick.call(b,b._getRowDataById(f))},reload:function(a){a&&(this.options.param=a),this.options.page=1,this._selectedId=[],this._getData()},loadData:function(a){a.push&&(this._rows=a,this._refreshBody())},getSelected:function(){for(var a=[],b=this._selectedId,c=0;c<b.length;c++)a.push(this._getRowDataById(b[c]));return a}}),d.Grid=l}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={text:"",iconCls:null,handler:null,enable:!0},e="button",f=b.Widgets.extend(function(){this.options=d,this.$inputGroup=null,this.$button=null,b.Widgets.apply(this,arguments)});c.extend(f.prototype,{_eventListen:function(){var a=this;this.$button.on("click",function(){a.options.enable&&a.options.handler&&a.options.handler.call()})},_init:function(){this._create()},_create:function(){var a=this.options,b=this.$element.hide();b.wrap('<div class="'+e+'"></div>');var d=this.$button=b.parent(),f=c('<i class="'+a.iconCls+'"></i>'),g=a.text||b.text()||b.val();d.append(f,g),a.enable||this.disable()},enable:function(){this.$button.removeClass("disabled"),this.options.enable=!0},disable:function(){this.$button.addClass("disabled"),this.options.enable=!1}}),b.Button=f,c.fn.button=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("button"),g="object"==typeof a&&a;null!=e&&e._destory(),d.data("button",b=new f(this,g))}),b}}(window),!function(a){var b=a.jQuery,c=a.cri,d=c.DataGrid=c.Grid.extend(function(){c.Grid.apply(this,arguments)});b.fn.datagrid=function(a){var c=null;return this.each(function(){var e=b(this),f=e.data("datagrid");options="object"==typeof a&&a,null!=f&&f._destory(),e.data("datagrid",c=new d(this,options))}),c}}(window),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.dataOptions=a.extend({},a.fn.fileUpload.defaults,c),this.title="",this.$element.attr("title")&&(this.title=this.$element.attr("title")),this.dataOptions.title&&(this.title=this.dataOptions.title),this.id=this.$element.attr("id"),this.name=this.$element.attr("name"),this.init()};b.prototype.init=function(){var b=this;this.fileUploadObj=this.$element,this.fileUploadObj.wrap(a('<div class="eb_fileUploadGroup"></div>')),this.parent=this.fileUploadObj.parent(),this.parent.data("fileUpload",b),this.fileUploadObj.after(a('<input class="eb_fileUploadInput" name="'+b.name+'" id="eb_fileUploadInput_'+b.id+'" />')),this.inputObj=this.parent.children(".eb_fileUploadInput"),this.inputObj.data("fileUpload",b),this.inputObj.before(a('<span class="eb_title">'+b.title+"</span>")),this.titleObj=this.parent.children(".eb_title"),this.inputObj.after(a('<div class="eb_button">浏览</div>')),this.buttonObj=this.parent.children(".eb_button"),this.fileUploadObj.change(function(){var a=b.fileUploadObj.val();b.inputObj.val(a),b.parent.attr("value",a)}),this.buttonObj.click(function(){b.fileUploadObj.trigger("click"),b.fileUploadObj.get(0).focus()}).mousedown(function(){setTimeout(function(){b.inputObj.addClass("focus"),b.buttonObj.addClass("focus")},1)}),this.setWidth(),this.setHeight(),this.setStyle()},b.prototype.setValue=function(a){this.inputObj.val(a),this.fileUploadObj.val(a),this.fileUploadObjClone&&his.fileUploadObjClone.val(a),this.parent.attr("value",a)},b.prototype.getValue=function(){var a=this.fileUploadObj.val();return this.fileUploadObjClone&&(a=this.fileUploadObjClone.val()),a},b.prototype.clearValue=function(){this.setValue("")},b.prototype.initInForm=function(b){var c=this;return b.append(c.fileUploadObjClone=c.fileUploadObj.clone().css("display","none").addClass("clone")),this.fileUploadObj.click(function(){return c.fileUploadObjClone.trigger("click"),!1}),this.fileUploadObjClone.change(function(){var b=a(this).val();c.setValue(b)}),c.fileUploadObjClone},b.prototype.setWidth=function(b){var c=this,d=a.fn.fileUpload.defaults.width;if(this.dataOptions.width&&(d=this.dataOptions.width),b&&(d=b),"string"==typeof d&&(d=d.split("px")[0]),this.parent.width(d),this.inputObj.width(c.parent.width()-140),this.fileUploadObj.width(c.parent.width()-75),this.dataOptions.titleWidth||0==this.dataOptions.titleWidth){var d=this.dataOptions.titleWidth;this.titleObj.width(d),this.inputObj.width(c.parent.width()-d-67),this.fileUploadObj.width(c.parent.width()-d-2)}},b.prototype.setHeight=function(b){var c=a.fn.fileUpload.defaults.height;this.dataOptions.height&&(c=this.dataOptions.height),b&&(c=b),"string"==typeof c&&(c=c.dplit("px")[0]),this.parent.height(c),this.inputObj.height(c-2),this.inputObj.css("line-height",c-2+"px"),this.fileUploadObj.height(c),this.titleObj.height(c),this.titleObj.css("line-height",c+2+"px"),this.buttonObj.height(c),this.buttonObj.css("line-height",c+"px")},b.prototype.setStyle=function(){var b=this;this.buttonObj.mouseover(function(){a(this).addClass("mouseover")}).mouseout(function(){a(this).removeClass("mouseover")}).mousedown(function(){a(this).addClass("mousedown")}).mouseup(function(){a(this).removeClass("mousedown")}),this.fileUploadObj.focus(function(){b.inputObj.addClass("focus"),b.buttonObj.addClass("focus")}).blur(function(){b.inputObj.removeClass("focus"),b.buttonObj.removeClass("focus")})},a.fn.fileUpload=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("fileUpload"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("fileUpload",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.fileUpload.defaults={width:250,height:20},a(window).on("load",function(){a(".eb_fileUpload").not(".clone").each(function(){var b=a(this),c=b.data("options");b.fileUpload(c?new Function("return {"+c+"}")():a.fn.fileUpload.defaults)})})}(window.jQuery),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={label:null,value:null,button:null,readonly:!1,onFocus:null,onBlur:null,onClick:null,enable:!0,required:!1},e="input-group",f="input-btn",g="with-btn",h=b.Widgets.extend(function(){this.options=d,this.$inputGroup=null,b.Widgets.apply(this,arguments)});c.extend(h.prototype,{_eventListen:function(){},_init:function(){var a=this.options,b=this.$element.val();null==a.value&&null!=b&&(a.value=b),this._createInputGroup(),null!=a.value&&this._setValue(a.value)},_createInputGroup:function(){var a=this.$element;a.wrap('<div class="'+e+'"></div>'),this.$inputGroup=a.parent(),this._wrapInput(),this.$input.before(this._label()),this.options.enable||this.disable()},_wrapInput:function(){var a=this,b=a.options,c=this.$element;b.readonly?c=this._readonlyInput(c):c.on("focus",function(){a.options.onFocus&&a.options.onFocus.call(a)}).blur(function(){a.options.onBlur&&a.options.onBlur.call(a)}),b.button&&c.after(this._button())&&c.addClass(g),this.$input=c},_readonlyInput:function(){var a=this,b=c('<span class="readonly" role="readonly"></span>');return b.on("click",function(){a.options.onFocus&&a.options.onFocus.call(a)}).blur(function(){a.options.onBlur&&a.options.onBlur.call(a)}),this.$element.attr("readonly",!0).hide().after(b),b},_button:function(){var a=this.options,b=null,d=this;return a.button&&(b=c('<i class="'+f+" "+a.button.iconCls+'"></i>').on("click",function(){a.button.handler.call(d)})),b},_label:function(){var a=this.options.label||this.$element.data("label")||this.$element.attr("title")||this.$element.attr("name")||"",b=c("<label></label>").text(a);return this.options.required&&b.addClass("required"),b},_destory:function(){var a=this.$element;this.$inputGroup.replaceWith(a)},_setValue:function(a){null!=a&&(this.$input.is("input")?this.$input.val(a):(this.$element.is("select")?(this.$element.val(a),this.$input.text(this.$element.find("option:selected").text())):(this.$element.val(a),this.$input.text(a)),this.$element.trigger("change")))},_getValue:function(){return this.$element.val()},disable:function(){var a=c('<div class="input-layout"></div>');0==this.$inputGroup.has(".input-layout").length&&this.$inputGroup.append(a)},enable:function(){this.$inputGroup.children(".input-layout").remove()},value:function(a){return arguments.length>0?void this._setValue(a):this._getValue()}}),b.Input=h,c.fn.input=function(a){var b=null;return this.each(function(){var d=c(this),e=d.data("input"),f="object"==typeof a&&a,g=d.attr("role");return"timeInput"==g?e:(null!=e&&e._destory(),void d.data("input",b=new h(this,f)))}),b}}(window),!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.marquee.defaults,c),this.$element=a(b),this.scrollInterval=null,this.contentInterval=null,this.$one=null,this.$two=null,this.ita=0,this.init()};b.prototype={eventListen:function(){var a=this;this.$element.on("mouseenter",function(){clearInterval(a.scrollInterval)}).on("mouseleave",function(){a.start()})},init:function(){var a=this;this.ita=0,this.options.content.length>0&&(this.createEle(),this.contentInterval=window.setInterval(function(){a.start()},3e3),this.eventListen())},createEle:function(){this.$one||this.$element.append('<div class="contentOne"></div>'),this.$two||this.$element.append('<div class="contentTwo"></div>'),this.$one=a(".contentOne",this.$element),this.$two=a(".contentTwo",this.$element),this.options.content&&(this.$one.html("<span>"+this.options.content[0].text+"</span>"),this.$two.html("<span>"+this.options.content[0].text+"</span>"))},start:function(){this.ita++,this.ita>=this.options.content.length&&(this.ita=0),this.$two.html("<span>"+this.options.content[this.ita].text+"</span>"),this.$element.scrollTop(0),clearInterval(this.scrollInterval);var a=this;this.scrollInterval=window.setInterval(function(){a.scroll()},20)},stop:function(){clearInterval(this.contentInterval)},scroll:function(){this.$element.scrollTop(this.$element.scrollTop()+1),this.$element.scrollTop%20==20&&clearInterval(this.scrollInterval)},refreshContent:function(a){this.options.content=a,this.init()}},a.fn.marquee=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("marquee"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("marquee",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.marquee.defaults={content:[],delayTime:3e3,height:20},a(window).on("load",function(){a("[class='marquee']").each(function(){var b=a(this),c=b.data("options");c&&b.marquee(new Function("return {"+c+"}")())})})}(window.jQuery),!function(a){var b=a.cri,c=a.jQuery,d=function(){};d.prototype={_notiBody:function(b,d){var e=this,f={success:"fa-exclamation",error:"fa-exclamation",warming:"fa-exclamation"};this.$notification&&this.$notification.length&&this._hide(this.$notification);var g=this.$notification=c('<div class="notification '+b+'"></div>'),h=c('<i class="icon fa '+f[b]+'"></i>'),i=c('<span class="message">'+d+"</span>"),j=c('<i class="btn fa fa-close"></i>').on("click",function(){e._hide(g)});g.append(h,i,j),c("body").append(g),e._show(),a.setTimeout(function(){e._hide(g)},5e3)},_hide:function(a){a.animate({height:"hide"},function(){a.remove()})},_show:function(){this.$notification.animate({height:"show"})},error:function(a){this._notiBody("error",a)},warming:function(a){this._notiBody("warming",a)},success:function(a){this._notiBody("success",a)}},b.notification=new d}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d={page:1,pageSize:10,total:0,rowsLen:0,onPage:null,onUpdate:null},e="first-page",f="prev-page",g="next-page",h="last-page",i="pager-number",j="pager-nav",k="pager-info",l="state-disabled",m="state-selected",n=b.Widgets.extend(function(){this.options=d,this.pager=null,b.Widgets.apply(this,arguments)});c.extend(n.prototype,{_eventListen:function(){var a=this;this.$pager.on("click","a:not('."+l+"')",function(b){var d=c(b.target).closest("a"),e=d.data("page");a._page(e)})},_init:function(){this._createPager(this.$element)},_createPager:function(a){var b=this.$pager=c("<div></div>").addClass("pager");b.append(this._createPagerBtn()).append(this._createPagerInfo()),a.append(b)},_createPagerBtn:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,k=parseInt(a.page)||1,l=Math.ceil(d/b),m=c("<div></div>").addClass(j),n=c("<a></a>").addClass(e).append('<span class="fa fa-angle-double-left"></span>'),o=c("<a></a>").addClass(f).append('<span class="fa fa-angle-left"></span>'),p=c("<a></a>").addClass(g).append('<span class="fa fa-angle-right"></span>'),q=c("<a></a>").addClass(h).append('<span class="fa fa-angle-double-right"></span>'),r=c("<ul></ul>").addClass(i);return this._fourBtn(n,o,p,q,k,l),this._numberPage(r,k,l),m.append(n).append(o).append(r).append(p).append(q),m},_updatePagerBtn:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,k=parseInt(a.page)||1,l=Math.ceil(d/b),m=c("."+j,this.$pager),n=c("."+e,m),o=c("."+f,m),p=c("."+g,m),q=c("."+h,m),r=c("."+i,m);this._fourBtn(n,o,p,q,k,l),r.empty(),this._numberPage(r,k,l)},_fourBtn:function(a,b,c,d,e,f){var g=e+1,h=e-1;1>=e?(a.addClass(l),b.addClass(l)):(a.removeClass(l).data("page",1),b.removeClass(l).data("page",h)),e>=f?(c.addClass(l),d.addClass(l)):(c.removeClass(l).data("page",g),d.removeClass(l).data("page",f))},_numberPage:function(a,b,d){for(var e=b>2?b-2:1,f=e+5,g=e;f>g;g++)if(g>0&&d>=g){var h=c("<li></li>"),i=c("<a></a>").data("page",g).text(g);i.addClass(g!=b?"pager-num":m),a.append(h.append(i))}},_updatePagerInfo:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,e=parseInt(a.page)||1,f=(e-1)*b+1,g=(e-1)*b+a.rowsLen,h=this.$pager,i=c("."+k,h);i.text(f+" - "+g+" of "+d+" items")},_createPagerInfo:function(){var a=this.options,b=a.pageSize||10,d=a.total||0,e=parseInt(a.page)||1,f=(e-1)*b+1,g=(e-1)*b+a.rowsLen;return c("<div></div>").addClass(k).text(f+" - "+g+" of "+d+" items")},_page:function(a){var b=this.options;b.page=a,this.options.onPage.call(this,b.page,b.pageSize)},update:function(a,b,c,d){var e=this.options;e.total=c,e.rowsLen=d,e.page=a,e.pageSize=b,this._updatePagerBtn(),this._updatePagerInfo(),e.onUpdate&&e.onUpdate(this)}}),b.Pager=n}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="selectBox-group",e="fa fa-caret-down",f="options",g="selected",h={label:"",data:null,change:null,value:null,enable:!0},i=b.Widgets.extend(function(){this.options=h,this.$selectBoxGroup=null,this.input=null,this.listView=null,this._value=null,this._text=null,b.Widgets.apply(this,arguments)});c.extend(i.prototype,{_init:function(){this._create();var a=this.options.value||this.$element.val();null!=a&&this.value(a)},_create:function(){this.$element.hide(),this.$element.wrap('<span class="'+d+'"></span>'),this.$selectBoxGroup=this.$element.parent(),this._createInput(),this._createListView()},_createInput:function(){var a=this,c={iconCls:e,handler:function(){a.listView.toggle()}};this.input=new b.Input(this.$element,{label:a.label,readonly:!0,button:c,enable:this.options.enable,onFocus:function(){a.listView.toggle()}})},_createListView:function(){var a=this;this.listView=new j(this.$selectBoxGroup,{data:a._data(),onChange:function(b){a.value(b)}})},_data:function(){var a=this.options.data;if(a){for(var b=[],d=0,e=a.length;e>d;d++)b.push('<option value="'+a[d].value+'">'+a[d].text+"</option>");this.$element.html(b.join(""))}else a=[],c("option",this.$element).each(function(){var b=c(this).text(),d=this.value;a.push({text:b,value:d})});return this.options.data=a,a},_setSelectOptions:function(a){var b=this.$element;if(b.is("select")){b.empty();for(var c=0,d=a.length;d>c;c++){var e=a[c];b.append('<option value="'+e.value+'">'+e.text+"</option>")}}},_getTextByValue:function(a){for(var b=this.options.data,c=0,d=b.length;d>c;c++)if(b[c].value===a)return b[c].text},_destory:function(){this.input._destory(),this.listView._destory()},disable:function(){this.input.disable()},enable:function(){this.input.enable()},value:function(a){return arguments.length>0?void(a!=this._value&&(this._value=a,this._text=this._getTextByValue(a),this.input.value(this._value),this.listView.select(this._value),this.options.change&&this.options.change.call(this))):this._value},text:function(a){var b=this.options.data;if(!(arguments.length>0))return this._text;for(var c=0,d=b.length;d>c;c++)b[c].text===a&&this.value(b[c].value)},setOptions:function(a){this.options.data=a,this._data(),this._setSelectOptions(a),a.length&&this.value(a[0].value),this.listView._destory(),this._createListView()}});var j=function(a,b){this.options=c.extend({data:[],onChange:null},b),this.value=b.value||null,this.$options=null,this.$parent=a,this._init(),this.text=null};j.prototype={_init:function(){var a=this.options.data,b=this.$options=c('<ul class="'+f+'"></ul>');if(a)for(var d=0,e=a.length;e>d;d++)b.append(this._createOption(a[d]));c("body").append(b.hide())},_createOption:function(a){var b=c("<li></li>").text(a.text),d=this;return b.on("click",function(){b.is("."+g)||(c("li."+g,d.$options).removeClass(g),b.addClass(g),d.text=a.text,d.value=a.value,d._change()),d.toggle()}),d.value==a.value&&b.addClass(g),b},_setPosition:function(){var a=this.$parent.offset().left+80,b=this.$parent.offset().top+28;this.$options.css({top:b,left:a})},_clickBlank:function(){var a=this;c(document).mouseup(function(b){var c=a.$options;c.is(b.target)||0!==c.has(b.target).length||a.$options.slideUp(200)})},_change:function(){this.options.onChange&&this.options.onChange.call(this,this.value,this.text)},select:function(a){var b=this.options.data,c=this.$options;if(b)for(var d=0,e=b.length;e>d;d++)if(a==b[d].value)return this.value=a,c.children().removeClass(g),void c.children().eq(d).addClass(g)},toggle:function(){var a=this;this._setPosition(),this.$options.is(":hidden")?this.$options.slideDown(200,function(){a._clickBlank()}):this.$options.slideUp(200)},_destory:function(){this.$options.remove()}},b.SelectBox=i,c.fn.selectBox=function(a){var b=null;return this.each(function(){var d=c(this),e="object"==typeof a&&a;b=d.data("selectBox"),null!=b&&b._destory(),d.data("selectBox",b=new i(this,e))}),b}}(window),!function(a){"use strict";var b=a.cri,c=a.jQuery,d="tabPage-group",e="tabPage-header",f="tabPage-header-leftBtn",g="tabPage-header-rightBtn",h="tabPage-header-tabs-wrap",i="tabPage-header-tabs",j="tabPage-header-tab",k="tabPage-header-tab-close",l="tabPage-body",m=150,n={onFouce:null,onCloseTab:null},o=b.Widgets.extend(function(){this.options=n,this.$tabPageGroup=null,this.$tabs=null,this._pageBodyQueue=[],b.Widgets.apply(this,arguments)});c.extend(o.prototype,{_init:function(){this._create()},_create:function(){this.$tabPageGroup=this.$element.addClass(d);var a=[];if(this.$element.children().each(function(){a.push(c(this).detach())}),this._createHeader(),a.length>0)for(var b=0;b<a.length;b++)this.addTab(a[b],a[b].data("title")||"",a[b].data("close"))},_createHeader:function(){var a=this,b=this.$pageHeader=c('<div class="'+e+'"></div>'),d=this.$leftBtn=c('<i class="fa fa-angle-double-left '+f+'"></i>').hide(),i=this.$rightBtn=c('<i class="fa fa-angle-double-right '+g+'"></i>').hide(),j=this.$tabsWrap=c('<div class="'+h+'"></div>');d.click(function(){a._offsetL()}),i.click(function(){a._offsetR()}),b.append(d,i),b.append(j),j.append(this._createTabs()),this.$tabPageGroup.append(b)},_offsetL:function(){var a=this.$tabs.position().left,b=this.$tabs.width(),c=this.$tabsWrap.width(),d=b+a-this.$tabs.css("marginLeft").split("px")[0];d>c&&this.$tabs.animate(d%100>0?{left:"-="+d%100+"px"}:{left:"-=100px"})},_offsetR:function(){var a=this.$tabs.position().left,b=this.$tabs.width(),c=this.$tabsWrap.width();if(0>=a){var d=b+a-this.$tabs.css("marginLeft").split("px")[0],e=c-d;this.$tabs.animate(e>0?{left:"+="+e%100+"px"}:{left:"+=100px"})}},_createTabs:function(){var a=this.$tabs=c('<ul class="'+i+'"></ul>');return a},focusTab:function(a){var b=this.$tabs,d=c(".selected",b).removeClass("selected").data("for");null!=d&&this._pageBodyQueue[d].hide(),a.addClass("selected"),this._pageBodyQueue[a.data("for")].show(),this.options.onFouce&&this.options.onFouce.call(this,a.data("for"))},_closeTab:function(a){var b=a.data("for");void 0!=b&&null!=b&&(this._pageBodyQueue[b]._destory(),this.options.onCloseTab&&this.options.onCloseTab&&this.options.onCloseTab.call(this,this._pageBodyQueue[b]),this._pageBodyQueue[b]=null,this._pageBodyQueue.splice(b,1),c("li:gt("+b+")",this.$tabs).each(function(){var a=+c(this).data("for");c(this).data("for",a-1)}),a.remove(),0==c(".selected",this.$tabs).length&&(b>=this._pageBodyQueue.length&&(b-=1),b>=0&&this.focusTab(this._getTab(b))))},_leftrightBtn:function(){var a=this.$tabs,b=a.width(),c=this.$pageHeader.width();b>c?(this.$leftBtn.show(),this.$rightBtn.show(),this.$pageHeader.addClass("shift")):(this.$leftBtn.hide(),this.$rightBtn.hide(),this.$pageHeader.removeClass("shift"))},_getTab:function(a){return c("li:eq("+a+")",this.$tabs)},addTab:function(a,b,d,e,f){b=b||"New Tab",(void 0==d||null==d||"null"==d)&&(d=!0);var g=this,h=this.$tabs,i=c('<li class="'+j+'">'+b+"</li>").data("for",this._pageBodyQueue.length).click(function(){g.focusTab(c(this))}),l=c('<i class="fa fa-close '+k+'"></i>').click(function(){g._closeTab(i)});d&&i.append(l),h.append(i);var n=new p(this.$tabPageGroup,{content:a,iframe:e,callback:f});return this._pageBodyQueue.push(n),h.width(this._pageBodyQueue.length*m),this._offsetL(),this.focusTab(i),this._leftrightBtn(),n},closeTab:function(a){this._closeTab(this._getTab(a))},select:function(a){this.focusTab(this._getTab(a))},getTabBody:function(a){return this._pageBodyQueue[a]},getTabBodyIndex:function(a){var b=-1;return c.each(this._pageBodyQueue,function(c){return a==this?(b=c,!1):void 0}),b}});var p=function(a,b){this.$parent=a,this.options=c.extend({content:null,iframe:!0,callback:null},b),this.$body=null,this._init()
};c.extend(p.prototype,{_init:function(){this._createBody()},_createBody:function(){this.$body=c('<div class="'+l+'"></div>'),this.$parent.append(this.$body),this._load()},_load:function(){var a=!0,b=this;if(this.options.content instanceof jQuery?a=!1:/^<\w+>.*/g.test(this.options.content)&&(a=!1),a)if(this.options.iframe){var c=document.createElement("iframe"),d=+new Date;c.src=this.options.content,c.id="id_"+d,c.name="name_"+d,c.attachEvent?c.attachEvent("onload",function(){b.options.callback&&b.options.callback.call()}):c.onload=function(){b.options.callback&&b.options.callback.call()},this.$body.append(c)}else this.$body.load(this.options.content,function(){b.options.callback&&b.options.callback.call()});else this.$body.append(this.options.content),this.options.callback&&this.options.callback.call()},_destory:function(){this.$body.remove()},getContent:function(){return this.$body},show:function(){this.$body.show()},hide:function(){this.$body.hide()},reload:function(a,b){a&&(this.options.content=a),b&&(this.options.callback=b),this.$body.empty(),this._load()}}),b.TabPage=o,c.fn.tabPage=function(a){var b=null;return this.each(function(){var d=c(this),e="object"==typeof a&&a;b=d.data("tabPage"),null!=b&&b._destory(),d.data("tabPage",b=new o(this,e))}),b}}(window),!function(a){"use strict";var b=function(b,c){var d=this;this.$element=a(b),this.dataOptions=a.extend({},a.fn.textarea.defaults,c),this.value=this.$element.val(),this.title="",this.$element.attr("title")&&(this.title=this.$element.attr("title")),this.dataOptions.title&&(this.title=this.dataOptions.title),this.id=this.$element.attr("id"),this.name=this.$element.attr("name"),this.placeholder=this.$element.attr("placeholder")?this.$element.attr("placeholder"):"",this.init(),this.setStyle(),this.$element.change(function(){d.check()})};b.prototype.check=function(){var a={length:0,result:!0},b=this.$element.val();return 1==this.dataOptions.required&&(b||(a.required="fail",a.result=!1,a.length++)),a},b.prototype.init=function(){var b=this;this.$element.wrap(a('<div class="eb_textareaGroup" name="'+b.name+'" value="'+b.value+'" data-options="'+b.$element.data("options")+'" id="'+b.id+'_subgroup"></div>')),this.parent=this.$element.parent(),this.parent.data("textarea",b),this.parent.prepend('<div class="eb_title">'+this.title+"</div>"),this.titleObj=this.parent.children(".eb_title"),this.textareaObj=this.$element,this.dataOptions.defaultVal&&this.textareaObj.val(b.dataOptions.defaultVal),1==this.dataOptions.required&&(this.textareaObj.attr("placeholder",b.placeholder+"（必填）"),this.parent.append('<span class="redStar">*</span>')),this.style=this.textareaObj.attr("style"),this.parent.attr("style",b.style),this.setWidth(),this.setHeight(),this.setEvent()},b.prototype.setWidth=function(){if(this.dataOptions.width){var a=this.dataOptions.width;"string"==typeof a&&(a=a.split("px")[0]),this.parent.width(a),this.textareaObj.width(a-86)}if(this.dataOptions.titleWidth||0==this.dataOptions.titleWidth){var b=this.dataOptions.titleWidth;"string"==typeof b&&(b=b.split("px")[0]);var a=this.parent.width(),c=a-b-13;this.textareaObj.width(c),this.titleObj.width(b)}},b.prototype.setValue=function(a){this.textareaObj.val(a),this.parent.attr("value",a)},b.prototype.getValue=function(){return this.textareaObj.val()},b.prototype.clearValue=function(){this.setValue("")},b.prototype.setHeight=function(){if(this.dataOptions.height){var a=this.dataOptions.height;"string"==typeof a&&(a=a.split("px")[0]),this.parent.height(a),this.textareaObj.height(a-6)}},b.prototype.setStyle=function(){var a=this;this.textareaObj.focus(function(){a.textareaObj.addClass("focus")}).blur(function(){a.textareaObj.removeClass("focus")})},b.prototype.check=function(){var a=this,b={length:0,result:!0},c=this.$element.val();return 1==this.dataOptions.required&&(c||(b.required="fail",b.result=!1,b.length++)),"numOnly"==this.dataOptions.validtype&&(this.setNumOnly()?a.value=a.getValue():(b.numOnly="fail",b.result=!1,b.length++,a.setValue(a.value))),b},b.prototype.setEvent=function(){var a=250;this.dataOptions.dblclickTimeSpan&&(a=this.dataOptions.dblclickTimeSpan);var b=this,c=null,d=null,e=null,f=!1,g=!1,h=!1;this.dataOptions.onclickHandler&&(this.textareaObj.get(0).onclick=this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onclickHandler?function(){f||(c=setTimeout(window[this.dataOptions.onclickHandler],a),f=!0,setTimeout(function(){f=!1},a))}:function(){f||(c=setTimeout(b.dataOptions.onclickHandler,a),f=!0,setTimeout(function(){f=!1},a))}:"string"==typeof this.dataOptions.onclickHandler?window[this.dataOptions.onclickHandler]:b.dataOptions.onclickHandler),this.dataOptions.onmousedownHandler&&(this.textareaObj.get(0).onmousedown=this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onmousedownHandler?function(){g||(d=setTimeout(window[this.dataOptions.onmousedownHandler],a),g=!0,setTimeout(function(){g=!1},a))}:function(){g||(d=setTimeout(b.dataOptions.onmousedownHandler,a),g=!0,setTimeout(function(){g=!1},a))}:"string"==typeof this.dataOptions.onmousedownHandler?window[this.dataOptions.onmousedownHandler]:b.dataOptions.onmousedownHandler),this.dataOptions.onmouseupHandler&&(this.textareaObj.get(0).onmouseup=this.dataOptions.ondblclickHandler?"string"==typeof this.dataOptions.onmouseupHandler?function(){h||(e=setTimeout(window[this.dataOptions.onmouseupHandler],a),h=!0,setTimeout(function(){h=!1},a))}:function(){h||(e=setTimeout(b.dataOptions.onmouseupHandler,a),h=!0,setTimeout(function(){h=!1},a))}:"string"==typeof this.dataOptions.onmouseupHandler?window[this.dataOptions.onmouseupHandler]:b.dataOptions.onmouseupHandler),this.dataOptions.ondblclickHandler&&(this.textareaObj.get(0).ondblclick="string"==typeof this.dataOptions.ondblclickHandler?function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(clearTimeout(e),e=null),window[b.dataOptions.ondblclickHandler]()}:function(){c&&(clearTimeout(c),c=null),d&&(clearTimeout(d),d=null),e&&(clearTimeout(e),e=null),b.dataOptions.ondblclickHandler()}),this.dataOptions.onfocusHandler&&(this.textareaObj.get(0).onfocus="string"==typeof this.dataOptions.onfocusHandler?window[this.dataOptions.onfocusHandler]:this.dataOptions.onfocusHandler),this.dataOptions.onblurHandler&&(this.textareaObj.get(0).onblur="string"==typeof this.dataOptions.onblurHandler?window[this.dataOptions.onblurHandler]:this.dataOptions.onblurHandler),this.dataOptions.onkeypressHandler&&(this.textareaObj.get(0).onkeypress="string"==typeof this.dataOptions.onkeypressHandler?window[this.dataOptions.onkeypressHandler]:this.dataOptions.onkeypressHandler),this.dataOptions.onkeydownHandler&&(this.textareaObj.get(0).onkeydown="string"==typeof this.dataOptions.onkeydownHandler?window[this.dataOptions.onkeydownHandler]:this.dataOptions.onkeydownHandler),this.dataOptions.onkeyupHandler&&(this.textareaObj.get(0).onkeyup="string"==typeof this.dataOptions.onkeyupHandler?window[this.dataOptions.onkeyupHandler]:this.dataOptions.onkeyupHandler),this.dataOptions.onchangeHandler&&(this.textareaObj.get(0).onchange="string"==typeof this.dataOptions.onchangeHandler?window[this.dataOptions.onchangeHandler]:this.dataOptions.onchangeHandler)},a.fn.textarea=function(c,d){var e=null,f=this.each(function(){var f=a(this),g=f.data("textarea"),h="object"==typeof c&&c;"string"==typeof c?e=g[c](d):f.data("textarea",g=new b(this,h))});return"string"==typeof c?e:f},a.fn.textarea.defaults={required:!1,dblclickTimeSpan:250,width:250,height:90,titleWidth:73},a(window).on("load",function(){a(".eb_textarea").each(function(){var b=a(this),c=b.data("options");b.textarea(c?new Function("return {"+c+"}")():a.fn.textarea.defaults)})})}(window.jQuery),!function(a){"use strict";function b(a){return c.isLeapYear(a)?[31,29,31,30,31,30,31,31,30,31,30,31]:[31,28,31,30,31,30,31,31,30,31,30,31]}var c=a.cri,d=a.jQuery,e="eb_timeInputGroup",f="eb_timeBox",g="fa fa-table",h={value:null,format:"yyyy/MM/dd hh:mm:ss",HMS:!1,enable:!0},i=c.Widgets.extend(function(){this.options=h,this.date=null,this.input=null,this.selectView=null,c.Widgets.apply(this,arguments)});i.prototype._init=function(){!this.options.HMS&&this.options.format&&(this.options.format=this.options.format.replace(/\s*[Hh].*$/,""));var a=this.$element.attr("role","timeInput");a.wrap('<div class="'+e+'"></div>'),this.$timeInputGroup=a.parent(),this.date=this.options.value||new Date,this._wrapInput(),this._timeSelectView()},i.prototype._wrapInput=function(){var a=this,b=this.date,d={iconCls:g,handler:function(){a.selectView.toggle()}};this.input=new c.Input(this.$element,{readonly:!0,value:c.formatDate(b,this.options.format),button:d,enable:this.options.enable,onFocus:function(){a.selectView.toggle()}})},i.prototype._timeSelectView=function(){var a=this,b=this.date;this.selectView=new j(this.$timeInputGroup,{value:b,HMS:this.options.HMS,onChange:function(){a.date=this.getDate(),a.input.value(c.formatDate(a.date,a.options.format))}})},i.prototype._setValue=function(a){this.date=a,this.input.value(c.formatDate(a,this.options.format)),this.selectView.setDate(a)},i.prototype.disable=function(){this.input.disable()},i.prototype.enable=function(){this.input.enable()},i.prototype.value=function(a){return void 0==a?this.date:void this._setValue(a)};var j=function(a,b){this.$parent=a,this.$timeBox=null,this.$daySelect=null,this.options=d.extend({value:new Date,HMS:!1,onChange:null},b),this.date=c.date2Json(this.options.value),this._create(a)};j.prototype={_create:function(a){var b=this.$timeBox=d('<div class="'+f+'"></div>'),c=d('<div class="eb_titleBar"></div>');c.append(this._yearSelect(),this._monthSelect(),'<span style="position:absolute;top:5px;right:23px;">月</span>'),b.append(c,this._daySelect()),1==this.options.HMS&&b.append(this._hmsSelect());var e=a.offset().left+80,g=a.offset().top+28;d("body").append(b.css({top:g,left:e}))},_yearSelect:function(){var a=this,b=this.date,c=d('<div class="eb_yearSelecter"></div>'),e=d('<i class="eb_toLastYear eb_yearButton fa fa-minus"></i>'),f=d('<i class="eb_toNextYear eb_yearButton fa fa-plus"></i>'),g=d('<span class="eb_year">'+b.yyyy+"</span>");return e.on("click",function(){g.html(--a.date.yyyy),a._change()}),f.on("click",function(){g.html(++a.date.yyyy),a._change()}),c.append(e,g,"年",f),c},_monthSelect:function(){var a=this,b=this.date,c=d('<select class="eb_monthSelect">');return d.each([1,2,3,4,5,6,7,8,9,10,11,12],function(a,b){10>b&&(b="0"+b),c.append('<option value="'+a+'">'+b+"</option>")}),c.val(b.MM),c.on("change",function(){b.MM=c.val(),a._refreshDaySelect(),a._change()}),c},_daySelect:function(){var a=this.$daySelect=d("<table></table>"),b=d('<tr class="week"></tr>'),c={Sunday:"日",Monday:"一",Tuesday:"二",Wednesday:"三",Thursday:"四",Friday:"五",Saturday:"六"},e=this;for(var f in c){var g=d("<th>"+c[f]+"</th>");"Sunday"==f&&g.addClass("eb_red"),"Saturday"==f&&g.addClass("red"),b.append(g)}a.append(b);for(var h=0;6>h;h++){for(var i=d('<tr class="days"></tr>'),j=0;7>j;j++){var k=d("<td></td>").on("click",function(){var b=d(this).text();b&&b!=e.date.dd&&(d("td.choosed",a).removeClass("choosed"),e.date.dd=+b,d(this).addClass("choosed"),e._change())});i.append(k)}a.append(i)}return this._refreshDaySelect(),a},_refreshDaySelect:function(){var a=this.date,c=b(a.yyyy)[a.MM],e=new Date(a.yyyy,a.MM,1).getDay();d("td.choosed",this.$daySelect).removeClass("choosed"),d("tr.days td",this.$daySelect).html("");for(var f=e;c+e>f;f++){var g=f%7,h=Math.floor(f/7),i=d('tr.days:eq("'+h+'") td:eq("'+g+'")',this.$daySelect),j=f-e+1;i.text(j),j==this.date.dd&&i.addClass("choosed")}},_hmsSelect:function(){function a(a,b){return function(){var h=+d(this).val();h>b?d(this).val(b):a>h&&d(this).val(a),g.date.HH=+c.val(),g.date.mm=+e.val(),g.date.ss=+f.val(),g._change()}}var b=d('<div class="eb_HMSBar">'),c=d('<input class="eb_HMSInput eb_Hour"/>').val(this.date.HH),e=d('<input class="eb_HMSInput eb_minute"/>').val(this.date.mm),f=d('<input class="eb_HMSInput eb_second"/>').val(this.date.ss),g=this;return c.on("change",a(0,23)),e.on("change",a(0,59)),f.on("change",a(0,59)),b.append(c,":",e,":",f),d(".eb_HMSInput",b).on("keydown",function(a){var b=a.keyCode||a.which||a.charCode;return b>=48&&57>=b||8==b?!0:!1}),b},_change:function(){this.options.onChange&&this.options.onChange.call(this)},_clickBlank:function(){var a=this;d(document).mouseup(function(b){var c=a.$timeBox;c.is(b.target)||0!==c.has(b.target).length||a.$timeBox.slideUp(200)})},_setPosition:function(){var a=this.$parent.offset().left+80,b=this.$parent.offset().top+28;this.$timeBox.css({top:b,left:a})},toggle:function(){var a=this;this._setPosition(),this.$timeBox.is(":hidden")?this.$timeBox.slideDown(200,function(){a._clickBlank()}):this.$timeBox.slideUp(200)},getDate:function(){var a=this.date;return new Date(a.yyyy,a.MM,a.dd,a.HH,a.mm,a.ss)},setDate:function(a){this.date=c.date2Json(a)}},d.fn.timeInput=function(a){var b=null;return this.each(function(){var c=d(this),e="object"==typeof a&&a;b=c.data("timeInput"),null!=b&&b._destory(),c.data("timeInput",b=new i(this,e))}),b}}(window),!function(a){"use strict";function b(a){var b=e('<i class="'+a+'"></i>');return b}function c(a){var c=e("<li></li>");return a.iconCls&&c.append(b(a.iconCls)),a.text&&c.append(a.text),a.handler&&c.on("click",a.handler),c}var d=a.cri,e=a.jQuery,f={buttons:[]},g="toolbar",h=d.Widgets.extend(function(){this.options=f,this.$toolBar=null,d.Widgets.apply(this,arguments)});e.extend(h.prototype,{_eventListen:function(){},_init:function(){this._create(this.$element)},_create:function(a){for(var b=this.options,d=b.buttons,f=this.$toolBar=e('<ul class="'+g+'"></ul>'),h=0,i=d.length;i>h;h++){var j=d[h];f.append(c(j))}a.append(f)}}),d.ToolBar=h}(window),!function(a){"use strict";function b(a,b){var c=a[0].style.height,d=a[0].height,e=b||c||d;if(!e)return null;var f=(""+e).split("%");return f.length>1&&(e=Math.floor(a.parent().height()*f[0]/100),e-=2),(e=(""+e).split("px")[0])?parseInt(e):void 0}function c(a,b){var c=a[0].style.width,d=a[0].width,e=b||c||d||"100%",f=(""+e).split("%");return f.length>1?Math.floor(a.parent().width()*f[0]/100):(e=e.split("px")[0],parseInt(e))}var d=a.jQuery,e=a.cri,f=31,g=31,h=16,j={file:"icon fa fa-file",folderOpen:"icon fa fa-folder-open",folderClose:"icon fa fa-folder"},k={url:"",title:null,param:null,rows:[],onSelected:null,onDblClick:null,page:!0,async:!1,asyncUrl:null},l=e.Tree=e.Widgets.extend(function(){this.options=k,this.$tree=null,this.$treebody=null,this.selectedRow=null,this.toolbar=null,this._className="tree",e.Widgets.apply(this,arguments)});d.extend(l.prototype,{_init:function(){this._getData(),this._createTree()},_eventListen:function(){var a=this;this.$treebody.on("click","div.li-content",function(b){return a._setSelected(b),a._fold(b),!1}).on("dblclick","div.li-content",function(b){a._onDblClickRow(b)})},_fold:function(a){var b=this.options,c=d(a.target).closest("div"),e=c.data("uid"),f=d(a.target).closest("li"),g=d("i",c);if(g.is(".fa-folder")?g.removeClass("fa-folder").addClass("fa-folder-open"):g.removeClass("fa-folder-open").addClass("fa-folder"),this._getDataById(e),b.async){var h={};d.each(b.selectedRow,function(a,b){"childrenList"!=a&&(h[a]=b)}),b.selectedRow.childrenList||d.ajax({type:"get",url:b.asyncUrl,success:function(a){b.selectedRow.childrenList=a.rows,this._appendChildren(f,a.rows)},data:h,dataType:"JSON",async:!1})}else this._expand(f)},_expand:function(a){var b=a.children("ul");b.length&&b.children("li").each(function(){d(this).animate({height:"toggle"},500)})},_getData:function(){var a=this;return d.ajax({type:"get",url:this.options.url,success:function(b){a.options.rows=b.rows},data:this.options.param,dataType:"JSON",async:!1}),!0},_createTree:function(){var a=this.options,e=b(this.$element,a.height),h=c(this.$element,a.width),i=d("<div></div>").addClass(this._className).width(h),j=this.$treeview=d("<div></div>").addClass("tree-view"),k=this.$treebody=d("<ul></ul>").addClass("tree-body");i.attr("style",this.$element.attr("style")).show().height(e),j.append(k),e&&(this.options.title&&(e-=f),this.options.toolbar&&(e-=g),this.$treeview.css("height",e)),this.$element.wrap(i),this.$element.hide(),this.$tree=this.$element.parent(),this._createTitle(this.$tree),this._createToolbar(this.$tree),this._eachNode(k,a.rows,"show",0,0),this.$tree.append(j)},_appendChildren:function(a,b){var c=d("<ul></ul>"),e=d(i,a).attr("marginLeft");this._eachNode(c,b,"show",0,e),a.append(c)},_eachNode:function(a,b,c,e,f){for(var g=0,i=b.length;i>g;g++){var k=b[g],l=d("<li></li>"),m=d('<span class="li-text">'+k.text+"</span>"),n=d('<i class="'+j.file+'"></i>').css("marginLeft",f),o=d('<div class="li-content"></div>').data("uid",++e);if(this._dealNodeData(k),n.attr("class",j[k.iconType]),a.append(l.append(o.append(n,m))),"hide"==c&&l.hide(),k.hasChildren){var p=d("<ul></ul>");l.append(p),f+=h,k.state&&"close"==k.state?this._eachNode(p,k.children,"hide",1e3*e,f):this._eachNode(p,k.children,c,1e3*e,f),f-=h}}},_dealNodeData:function(a){a.iconType="file",a.children&&a.children.length>0&&(a.hasChildren=!0),a.hasChildren&&((void 0==a.state||null==a.state)&&(a.state="open"),a.iconType=a.state&&"open"==a.state&&a.children&&a.children.length>0?"folderOpen":"folderClose")},_createTitle:function(a){this.options.title&&(this.$title=d('<div class="title"><span>'+this.options.title+"</span></div>"),a.append(this.$title))},_createToolbar:function(a){this.options.toolbar&&(this.toolbar=new e.ToolBar(a,{buttons:this.options.toolbar}))},_setSelected:function(a){var b=d(a.target).closest("div"),c=b.data("uid"),e=this.options;this._getDataById(c),e.onSelected&&e.onSelected(e.selectedRow)},_clickToolbar:function(a){var b=d(a.target),c=b.data("toolbar");this.options.toolbar[c].handler()},_getDataById:function(a){var b=this.options,c=null;!function(b){for(var d=[];a>=1;){var e=a%1e3;d.push(e),a=Math.floor(a/1e3)}for(var f=d.length-1;f>=0;f--){var g=d[f]-1;b[g]&&(c=b[g])&&(b=b[g].children)}}(b.rows),b.selectedRow=c},_onDblClickRow:function(a){var b=d(a.target).closest("div"),c=b.data("uid"),e=this.options;return this._getDataById(c),e.onDblClick&&e.onDblClick(e.selectedRow),!1},getSelected:function(){return this.options.selectedRow},reload:function(a){a&&(this.options.param=a),this._init()}}),d.fn.tree=function(a){var b=null;return this.each(function(){var c=d(this),e="object"==typeof a&&a;c.data("tree",b=new l(this,e))}),b}}(window),!function(a){var b=a.jQuery,c=a.cri,d=c.TreeGrid=c.Grid.extend(function(){this._gridClassName="treegrid",c.Grid.apply(this,arguments),this._selfEvent()});d.prototype._selfEvent=function(){var a=this;this.$gridbody.on("click","tr td.line-file-icon i",function(b){a._fold(b),b.preventDefault()})},d.prototype._refreshBody=function(){function a(a,c,d,e){var f={file:"fa fa-file",folderOpen:"fa fa-folder-open",folderClose:"fa fa-folder"};b.each(c,function(){var c=b("<td></td>"),g=null==d[this.field]?"":d[this.field];if("text"==this.field){var h=b("<i></i>").attr("class",f.file);(d.hasChildren||d.children&&d.children.length)&&("closed"==d.state?h.attr("class",f.folderClose):h.attr("class",f.folderOpen)),c.css("text-indent",e).addClass("line-file-icon").append(h).append(g)}else c.text(g);a.append(c)})}var c=this.$gridbody,d=b("<table></table>"),e=this.options,f=this._columns,g=1,h=1,i=this,j=6;d.append(this._createColGroup(c.width())),this._selectedId=[],!function l(c,k,m){for(var n=0,o=c.length;o>n;n++){var p=b("<tr></tr>").data("rowid",++m).attr("data-rowid",m),q=c[n];"show"==k||p.hide(),e.checkBox&&(q.check?(p.addClass("selected"),p.append(b("<td></td>").addClass("line-checkbox").append('<input type="checkbox" checked/>')),i._selectedId.push(m)):p.append(b("<td></td>").addClass("line-checkbox").append('<input type="checkbox"/>'))),e.rowNum&&p.append(b("<td></td>").addClass("line-number").append(g++)),a(p,f,q,h),d.append(p),q.children&&q.children.length>0&&(q.hasChildren=!0,h+=j,q.state&&"closed"==q.state?l(q.children,"hide",1e3*m):l(q.children,k,1e3*m),h-=j)}}(this._rows,"show",0),this.$gridbody.removeClass("loading").html(d),b("tr:nth-child(odd)",d).css("background","#FFF");var k=c.width()-c.prop("clientWidth");this.$gridhead.css("paddingRight",k)},d.prototype._fold=function(a){var c=this.options,d=b(a.target).closest("tr"),e=d.data("rowid"),f=this;if(this.selectedRow=this._getRowDataById(e),"closed"==this.selectedRow.state){if(this.selectedRow.state="open",c.async&&!this.selectedRow.children){var g={};b.each(this.selectedRow,function(a,b){"children"!=a&&(g[a]=b)}),this.selectedRow.childrenList||b.ajax({type:"post",url:c.asyncUrl,success:function(a){f.selectedRow.children=a.rows},data:g,dataType:"JSON",async:!1})}}else this.selectedRow.state="closed";this._refreshBody()},d.prototype._checkbox=function(a){var c=b(a.target),d=b(a.target).closest("tr"),e=parseInt(d.data("rowid")),f=e,g=this._getRowDataById(e),h=c.prop("checked");!function(a){a.children&&a.children.length>0&&(f*=1e3,!function c(a){b.each(a,function(){f+=1,b("tr[data-rowid="+f+"] input[type=checkbox]").prop("checked",h),this.children&&this.children.length>0&&(f*=1e3,c(this.children),f=Math.floor(f/=1e3))})}(a.children))}(g)},d.prototype._getRowDataById=function(a){var b=(this.options,null);return a=parseInt(a),!function(c){for(var d=[];a>=1;){var e=a%1e3;d.push(e),a=Math.floor(a/1e3)}for(var f=d.length-1;f>=0;f--){var g=d[f]-1;c[g]&&(b=c[g])&&(c=c[g].children)}}(this._rows),b},b.fn.treegrid=function(a){var c=null;return this.each(function(){var e=b(this),f="object"==typeof a&&a;c=e.data("treegrid"),c&&c.$grid.before(e).remove(),e.data("treegrid",c=new d(this,f))}),c}}(window),!function(a){"use strict";function b(a,b){return"string"==typeof b&&(b=new RegExp("^(?:"+b+")$")),b.test(a)}function c(a,c,d){var e=a.val();return a.filter(c).length&&""!==e?b(e,d):!0}function d(a,b){return a.length?null!=a[0].attributes[b]:!1}var e=a.cri,f=a.jQuery,g=":input:not(:button,[type=submit],[type=reset],[disabled])",h="[type=num],[type=range]",i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,j=/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,k={required:function(a){var b=a.filter("[type=checkbox]").length&&!a.is(":checked"),c=a.val();return!(d(a,"required")&&(""===c||!c||b))},pattern:function(a){return a.filter("[role=text],[role=email],[role=url],[role=tel],[role=search],[role=password]").filter("[pattern]").length&&""!==a.val()?b(a.val(),a.attr("pattern")):!0},min:function(a){if(a.filter(h).filter("[min]").length&&""!==a.val()){var b=parseFloat(a.attr("min"))||0,c=parseFloat(a.val());return c>=b}return!0},max:function(a){if(a.filter(h).filter("[max]").length&&""!==a.val()){var b=parseFloat(a.attr("max"))||0,c=parseFloat(a.val());return b>=c}return!0},email:function(a){return c(a,"[role=email]",i)},url:function(a){return c(a,"[role=url]",j)},date:function(a){return a.filter("[role^=date]").length&&""!==a.val()?null!==parseDate(a.val(),a.attr("format")):!0},number:function(a){return a.filter(h).length&&a.val()?e.isNum(a.val()):!0}},l={required:"请输入",min:"请输入大于的数字",max:"请输入小于的数字",email:"请输入合法的邮箱地址",url:"请输入合法的URL地址",date:"请输入合法的日期",number:"请输入数字"},m={rules:k,messages:l,validateOnBlur:!1},n=e.Widgets.extend(function(){this.options=m,e.Widgets.apply(this,arguments)});f.extend(n.prototype,{_init:function(){},_eventListen:function(){var a=this,b=this.$element;this.$element.is("form")&&this.$element.on("submit",function(){a.validate()}),a.options.validateOnBlur&&(b.is(g)?b.on("blur",function(){a._validateInput(b)}):b.find(g).each(function(){f(this).is("[role=timeInput]")?f(this).on("change",function(){a._validateInput(f(this))}):f(this).on("blur",function(){a._validateInput(f(this))})}))},_checkValidity:function(a){var b,c=this.options.rules;for(b in c)if(!c[b].call(this,a))return{valid:!1,key:b};return{valid:!0}},validate:function(){var a=this,b=this.$element,c=!0;return b.is(g)?c=c&&a._validateInput(b):b.find(g).each(function(){var b=a._validateInput(f(this));c=c&&b}),c},_validateInput:function(a){var b=this._checkValidity(a),c=b.valid;if(c)a.next(".input-warm").remove();else{var d=a.next(".input-warm");0==d.length?a.after(f('<span class="input-warm">'+this.options.messages[b.key]+"</span>")):d.text(this.options.messages[b.key]),a.is("[readonly=readonly]")&&a.closest(".input-group").one("click",function(){a.next(".input-warm").remove()}),a.one("focus",function(){a.next(".input-warm").remove()})}return c}}),e.Validator=n,f.fn.validator=function(a){var b=null;return this.each(function(){var c=f(this),d="object"==typeof a&&a;b=c.data("validator"),c.data("validator",b=new n(this,d))}),b}}(window),!function(a){"use strict";function b(a,b){return a=""+a,/^-?\d+%$/g.test(a)?Math.floor(b*a.split("%")[0]/100):/^\d+px$/g.test(a)?parseInt(a.split("px")[0]):parseInt(a)||0}function c(a,b){return a=""+a,/^-?\d+%$/g.test(a)?Math.floor(b*a.split("%")[0]/100):/^\d+px$/g.test(a)?parseInt(a.split("px")[0]):parseInt(a)||0}var d=a.cri,e=a.jQuery,f="window-head",g={Minimize:"fa fa-minus",Maximize:"fa fa-expand",Close:"fa fa-close",Resume:"fa fa-compress"},h=150,i=35,j=1,k=1e4,l={title:"",actions:["Close","Minimize","Maximize"],content:null,visible:!0,modal:!1,width:600,height:400,position:{top:0,left:0},center:!0,resizable:!0,dragable:!0,onReady:null,onOpen:null,onClose:null,onMaxmize:null,onMinimize:null,onResume:null},m=d.Widgets.extend(function(){this.options=l,this.windowStatus="normal",d.Widgets.apply(this,arguments),m.prototype.windowStack.push(this)});e.extend(m.prototype,{windowStack:[],_initOptions:function(a){this.options=e.extend(!0,{},this.options,a),a.actions&&a.actions.length&&(this.options.actions=a.actions)},_eventListen:function(){var a=this;this.options.dragable&&this.$window.on("mousedown",".window-head",function(b){var c=+a.$window.css("left").split("px")[0],d=+a.$window.css("top").split("px")[0],f=+a.$window.width(),g=+a.$window.height(),h=b.pageX,i=b.pageY;e(document).on("mousemove",function(b){var e=b.pageX,j=b.pageY,k=e-h,l=j-i;c+=k,d+=l,h=e,i=j,a._setPosition({top:d,left:c,width:f,height:g})})}),this.$window.on("click",".action",function(){var b=a._actionForButton(e(this));return b&&"function"==typeof a[b]&&a[b](),!1}).on("click",".window-head",function(){a.toFront()}).on("mousedown",".window-resizer",function(b){var c=+a.$window.css("left").split("px")[0],d=+a.$window.css("top").split("px")[0],f=+a.$window.width(),g=+a.$window.height(),h=b.pageX,i=b.pageY,j=/[ewsn]+$/.exec(this.className)[0];e(document).on("mousemove",function(b){var e=b.pageX,k=b.pageY,l=e-h,m=k-i;h=e,i=k,j.indexOf("e")>=0&&(f+=l),j.indexOf("w")>=0&&(c=e,f-=l),j.indexOf("n")>=0&&(d=k,g-=m),j.indexOf("s")>=0&&(g+=m),a._setPosition({top:d,left:c,width:f,height:g})})}),e(document).on("mouseup",function(){e(document).off("mousemove")})},_init:function(){var d=this.options;d.width=b(d.width,e(a).width())-2*j,d.height=c(d.height,e(a).height())-i-2*j,this._createBody(),this._overlay(),this._createHead(),d.resizable&&this._createResizeHandler(),e("body").append(this.$window),d.visible?this.$window.show():this.$window.hide()},_createHead:function(){var a=e('<div class="'+f+'"></div>');a.append(this._createTitle()).append(this._createActions()),this.$window.prepend(a),this.$windowHead=a},_createBody:function(){var b=this.options,c=e(a).width(),d=e(a).height(),f=this.$element,g=e('<div class="window"></div>'),h=e('<div class="window-content"></div>');f.detach(),this.$window=g,b.center&&(b.position.left=(c-b.width-2*j)/2,b.position.top=(d-b.height-i-2*j)/2),g.css({zIndex:this._zIndex()}),this._setPosition({top:b.position.top,left:b.position.left,width:b.width,height:b.height}),g.append(h),h.append(f),this.load(this.options.content),e("body").append(this.$window)},_createTitle:function(){var a=this.options.title||"",b=e("<span></span>").addClass("title").text(a);return b},_createActions:function(){for(var a=this.options,b=e("<div></div>").addClass("actions"),c=a.modal?["Maximize","Close"]:["Minimize","Maximize","Close"],d=0,f=c.length;f>d;d++)for(var h=c[d],i=0,j=a.actions.length;j>i;i++){var k=a.actions[i];if(k==h){var l=e('<span class="action"></span>').addClass(k.toLowerCase()),m=e('<i class="'+g[k]+'"></i>');b.append(l),l.append(m)}}return b},_createResizeHandler:function(){var a=[],b="n e s w nw ne se sw";e.each(b.split(" "),function(b,c){a.push('<div class="window-resizer window-resizer-'+c+'" style="display: block;"></div>')}),this.$window.append(a.join(""))},_overlay:function(){if(this.options.modal){var a=+this.$window.css("zIndex");this.$window.css("zIndex",a+1);var b=e(".overlay");0==b.length&&(b=e("<div></div>").addClass("overlay"),e("body").append(b)),b.css("zIndex",a).show()}},_setPosition:function(a){var b=this.$window;b.css(a),this.options.position=a},_actionForButton:function(a){var b=/\baction \w+\b/.exec(a[0].className)[0];return{"action minimize":"minimize","action maximize":"maximize","action resume":"resume","action close":"close"}[b]},open:function(){this._setStyleByStatus("normal"),e(".window-content",this.$window).show(),this.windowStatus="normal",this.options.onOpen&&this.options.onOpen.call(this)},close:function(){var a=k,b=null,c=e(".window"),d=e(".overlay");this.$window.css("zIndex",k).hide(),this.windowStatus="close",this.$window.removeClass("mini-window"),c.each(function(){var c=+this.style.zIndex+1;this.style.zIndex=c,c>=a&&(a=c,b=this)}),d.hide();for(var f=this.windowStack.length-1;f>=0;f--)if("close"!=this.windowStack[f].windowStatus&&this.windowStack[f].options.modal)return b.style.zIndex=a+1,d.css("zIndex",a),void d.show();this.options.onClose&&this.options.onClose.call(this)},maximize:function(){this._setStyleByStatus("maximize"),this._setButtons("maximize"),this.windowStatus="maximize",this.options.onMaxmize&&this.options.onMaxmize.call(this)},minimize:function(){this._setButtons("minimize"),e(".window-content",this.$window).hide();var a=e(".mini-window").size()*h;this._setStyleByStatus("minimize"),this.$window.css("left",a),this.windowStatus="minimize",this.options.onMinimize&&this.options.onMinimize.call(this)},resume:function(){if(this._setButtons("normal"),this._setStyleByStatus("normal"),e(".window-content",this.$window).show(),"minimize"==this.windowStatus){var a=0;
this.windowStatus="normal",e.each(m.prototype.windowStack,function(b,c){"minimize"==c.windowStatus&&c._moveLeft(a++)})}this.windowStatus="normal",this.options.onResume&&this.options.onResume.call(this)},_setStyleByStatus:function(a){var b=this.options,c=b.position,d={minimize:"window mini-window",maximize:"window maxi-window",closed:"window",normal:"window"},e={width:b.width,height:b.height,left:c.left,top:c.top,bottom:"auto",right:"auto"};this.$window.prop("class",d[a]).css(e)},_setButtons:function(a){var b={minimize:["resume","close"],maximize:["resume","close"],normal:["minimize","maximize","close"]},c=e(".actions",this.$window);if(e(".action",c).hide(),"minimize"==a){var d=e(".maximize",c).removeClass("maximize").addClass("resume");e("i",d).prop("class",g.Maximize)}if("maximize"==a){var d=e(".maximize",c).removeClass("maximize").addClass("resume");e("i",d).prop("class",g.Resume)}if("normal"==a){var d=e(".resume",c).removeClass("resume").addClass("maximize");e("i",d).prop("class",g.Maximize)}e.each(b[a],function(a,b){e("."+b,c).show()})},_moveLeft:function(a){this.$window.css("left",h*a)},toFront:function(){var a=this._getFrontWindow();if(this.$window!=a){var b=+this.$window.css("zIndex");this.$window.css("zIndex",a.css("zIndex")),a.css("zIndex",b)}},_getFrontWindow:function(){var a=+this.$window.css("zIndex"),b=this.$window;return e(".window").each(function(){var c=+this.style.zIndex;c>a&&(b=e(this),a=c)}),b},load:function(a){var b=this.$element,c=this,d=this.options,f=e('<i class="fa fa-spinner fa-spin"></i>').addClass("loadingIcon");a?(b.empty(),b.addClass("loading").html(f),b.load(a,function(){b.removeClass("loading"),f.remove(),d.onReady&&d.onReady.call(c,c.$window)})):d.onReady&&d.onReady.call(c,c.$window)},_zIndex:function(){var a=k;return e(".window").each(function(){a=Math.max(+this.style.zIndex,a)}),++a},_destory:function(){var a=this.$element,b=a.parents(".window");b.after(a).remove()}}),d.Window=m,e.fn.window=function(a){var b=null;return this.each(function(){var c=e(this),d=c.data("window"),f="object"==typeof a&&a;if(null!=d){if(!d.options.content)return b=d,a.visible?b.$window.hide():(b.$window.show(),b.toFront()),!1;d.$element.empty(),d.load(d.options.content)}c.data("window",b=new m(this,f))}),b}}(window);